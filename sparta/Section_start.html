

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Getting Started &mdash; SPARTA 6 Jul 2020 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/rtd_overrides.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygm_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Commands" href="Section_commands.html" />
    <link rel="prev" title="1. Introduction" href="Section_intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SPARTA
          

          
          </a>

          
            
            
              <div class="version">
                6 Jul 2020  (build: 23/07/2020)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Section_intro.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-s-in-the-sparta-distribution">2.1. What’s in the SPARTA distribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#making-sparta">2.2. Making SPARTA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#read-this-first">2.2.1. Read this first:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#steps-to-build-a-sparta-executable-using-make">2.2.2. Steps to build a SPARTA executable using make:</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step-0">2.2.2.1. Step 0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-1">2.2.2.2. Step 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-2">2.2.2.3. Step 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-3">2.2.2.4. Step 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-4">2.2.2.5. Step 4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-5">2.2.2.6. Step 5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-6">2.2.2.7. Step 6</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-7">2.2.2.8. Step 7</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-8">2.2.2.9. Step 8</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-9">2.2.2.10. Step 9</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#steps-to-build-a-sparta-executable-using-cmake">2.2.3. Steps to build a SPARTA executable using CMake:</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c0">2.2.3.1. Step 0</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c1">2.2.3.2. Step 1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c2">2.2.3.3. Step 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c3">2.2.3.4. Step 3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c4">2.2.3.5. Step 4</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c5">2.2.3.6. Step 5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c6">2.2.3.7. Step 6</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c7">2.2.3.8. Step 7</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c8">2.2.3.9. Step 8</a></li>
<li class="toctree-l4"><a class="reference internal" href="#start-step-c9">2.2.3.10. Step 9</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step-10">2.2.3.11. Step 10</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#errors-that-can-occur-when-making-sparta">2.2.4. Errors that can occur when making SPARTA:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-build-tips-using-make">2.2.5. Additional build tips using make:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-build-tips-using-cmake">2.2.6. Additional build tips using CMake:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-for-a-mac">2.2.7. Building for a Mac:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-for-windows">2.2.8. Building for Windows:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#making-sparta-with-optional-packages">2.3. Making SPARTA with optional packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#package-basics">2.3.1. Package basics:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#including-excluding-packages-with-make">2.3.2. Including/excluding packages with make:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#including-excluding-packages-with-cmake">2.3.3. Including/excluding packages with CMake:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#building-sparta-as-a-library">2.4. Building SPARTA as a library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#static-library">2.4.1. Static library:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shared-library">2.4.2. Shared library:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-requirement-for-using-a-shared-library">2.4.3. Additional requirement for using a shared library:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calling-the-sparta-library">2.4.4. Calling the SPARTA library:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-sparta">2.5. Running SPARTA</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-line-options">2.6. Command-line options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sparta-screen-output">2.7. SPARTA screen output</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Section_commands.html">3. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_packages.html">4. Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_accelerate.html">5. Accelerating SPARTA performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_howto.html">6. How-to discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_example.html">7. Example problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_perf.html">8. Performance &amp; scalability</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_tools.html">9. Additional tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_modify.html">10. Modifying &amp; extending SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_python.html">11. Python interface to SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_errors.html">12. Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_history.html">13. Future and history</a></li>
</ul>

            
          
  <a href= "genindex.html">Index</a>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SPARTA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>2. Getting Started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/Section_start.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<span id="start"></span><h1><a class="toc-backref" href="#id13">2. Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to build and run SPARTA, for both new and
experienced users.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#getting-started" id="id13">Getting Started</a></p>
<ul>
<li><p><a class="reference internal" href="#what-s-in-the-sparta-distribution" id="id14">What’s in the SPARTA distribution</a></p></li>
<li><p><a class="reference internal" href="#making-sparta" id="id15">Making SPARTA</a></p></li>
<li><p><a class="reference internal" href="#making-sparta-with-optional-packages" id="id16">Making SPARTA with optional packages</a></p></li>
<li><p><a class="reference internal" href="#building-sparta-as-a-library" id="id17">Building SPARTA as a library</a></p></li>
<li><p><a class="reference internal" href="#running-sparta" id="id18">Running SPARTA</a></p></li>
<li><p><a class="reference internal" href="#command-line-options" id="id19">Command-line options</a></p></li>
<li><p><a class="reference internal" href="#sparta-screen-output" id="id20">SPARTA screen output</a></p></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="what-s-in-the-sparta-distribution">
<span id="start-what-s-sparta"></span><h2><a class="toc-backref" href="#id14">2.1. What’s in the SPARTA distribution</a><a class="headerlink" href="#what-s-in-the-sparta-distribution" title="Permalink to this headline">¶</a></h2>
<p>When you download SPARTA you will need to unzip and untar the downloaded
file with the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gunzip sparta*.tar.gz
tar xvf sparta*.tar
</pre></div>
</div>
<p>This will create a SPARTA directory containing two files and several
sub-directories:</p>
<div class="docutils container">
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>README</p></td>
<td><p>text file</p></td>
</tr>
<tr class="row-even"><td><p>LICENSE</p></td>
<td><p>the GNU General Public License (GPL)</p></td>
</tr>
<tr class="row-odd"><td><p>bench</p></td>
<td><p>benchmark problems</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>files with species, collision, and reaction parameters</p></td>
</tr>
<tr class="row-odd"><td><p>doc</p></td>
<td><p>documentation</p></td>
</tr>
<tr class="row-even"><td><p>examples</p></td>
<td><p>simple test problems</p></td>
</tr>
<tr class="row-odd"><td><p>python</p></td>
<td><p>Python wrapper</p></td>
</tr>
<tr class="row-even"><td><p>src</p></td>
<td><p>source files</p></td>
</tr>
<tr class="row-odd"><td><p>tools</p></td>
<td><p>pre- and post-processing tools</p></td>
</tr>
</tbody>
</table>
</div>
<hr class="docutils" />
</div>
<div class="section" id="making-sparta">
<span id="start-making-sparta"></span><h2><a class="toc-backref" href="#id15">2.2. Making SPARTA</a><a class="headerlink" href="#making-sparta" title="Permalink to this headline">¶</a></h2>
<p>This section has the following sub-sections:</p>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#read-this-first" id="id21">Read this first:</a></p></li>
<li><p><a class="reference internal" href="#steps-to-build-a-sparta-executable-using-make" id="id22">Steps to build a SPARTA executable using make:</a></p></li>
<li><p><a class="reference internal" href="#steps-to-build-a-sparta-executable-using-cmake" id="id23">Steps to build a SPARTA executable using CMake:</a></p></li>
<li><p><a class="reference internal" href="#errors-that-can-occur-when-making-sparta" id="id24">Errors that can occur when making SPARTA:</a></p></li>
<li><p><a class="reference internal" href="#additional-build-tips-using-make" id="id25">Additional build tips using make:</a></p></li>
<li><p><a class="reference internal" href="#additional-build-tips-using-cmake" id="id26">Additional build tips using CMake:</a></p></li>
<li><p><a class="reference internal" href="#building-for-a-mac" id="id27">Building for a Mac:</a></p></li>
<li><p><a class="reference internal" href="#building-for-windows" id="id28">Building for Windows:</a></p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="read-this-first">
<span id="start-read-first"></span><h3><a class="toc-backref" href="#id21">2.2.1. Read this first:</a><a class="headerlink" href="#read-this-first" title="Permalink to this headline">¶</a></h3>
<p>Building SPARTA can be non-trivial. You may need to edit a makefile,
there are compiler options to consider, additional libraries can be used
(MPI, JPEG).</p>
<p>Please read this section carefully. If you are not comfortable with
cmake, makefiles, or building codes on a Linux platform, or running an MPI job
on your machine, please find a local expert to help you.</p>
<p>If you have a build problem that you are convinced is a SPARTA issue
(e.g. the compiler complains about a line of SPARTA source code), then
please send an email to the
<a class="reference external" href="http://sparta.sandia.gov/authors.html">developers</a>.</p>
<p>If you succeed in building SPARTA on a new kind of machine, for which
there isn’t a similar Makefile in the src/MAKE directory or .cmake file
in cmake/presets, send it to the
<a class="reference external" href="http://sparta.sandia.gov/authors.html">developers</a> and we’ll include
it in future SPARTA releases.</p>
<hr class="docutils" />
</div>
<div class="section" id="steps-to-build-a-sparta-executable-using-make">
<span id="start-steps-build-make"></span><h3><a class="toc-backref" href="#id22">2.2.2. Steps to build a SPARTA executable using make:</a><a class="headerlink" href="#steps-to-build-a-sparta-executable-using-make" title="Permalink to this headline">¶</a></h3>
<div class="section" id="step-0">
<span id="start-step-0"></span><h4>2.2.2.1. Step 0<a class="headerlink" href="#step-0" title="Permalink to this headline">¶</a></h4>
<p>The src directory contains the C++ source and header files for SPARTA.
It also contains a top-level Makefile and a MAKE sub-directory with
low-level Makefile.* files for many machines. From within the src
directory, type “make” or “gmake”. You should see a list of available
choices. If one of those is the machine and options you want, you can
type a command like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make g++
or
gmake mac
</pre></div>
</div>
<p>Note that on a multi-core platform you can launch a parallel make, by using the “-j” switch with the make command, which will build SPARTA more quickly.</p>
<p>If you get no errors and an executable like spa_g++ or spa_mac is
produced, you’re done; it’s your lucky day.</p>
<p>Note that by default none of the SPARTA optional packages are installed.
To build SPARTA with optional packages, see <a class="reference internal" href="#start-optional-packages"><span class="std std-ref">this section</span></a>
below.</p>
</div>
<div class="section" id="step-1">
<span id="start-step-1"></span><h4>2.2.2.2. Step 1<a class="headerlink" href="#step-1" title="Permalink to this headline">¶</a></h4>
<p>If Step 0 did not work, you will need to create a low-level Makefile for
your machine, like Makefile.foo. Copy an existing src/MAKE/Makefile.*
as a starting point. The only portions of the file you need to edit are
the first line, the “compiler/linker settings” section, and the
“SPARTA-specific settings” section.</p>
</div>
<div class="section" id="step-2">
<span id="start-step-2"></span><h4>2.2.2.3. Step 2<a class="headerlink" href="#step-2" title="Permalink to this headline">¶</a></h4>
<p>Change the first line of src/MAKE/Makefile.foo to list the word “foo”
after the “#”, and whatever other options it will set. This is the line
you will see if you just type “make”.</p>
</div>
<div class="section" id="step-3">
<span id="start-step-3"></span><h4>2.2.2.4. Step 3<a class="headerlink" href="#step-3" title="Permalink to this headline">¶</a></h4>
<p>The “compiler/linker settings” section lists compiler and linker
settings for your C++ compiler, including optimization flags. You can
use g++, the open-source GNU compiler, which is available on all Linux
systems. You can also use mpicc which will typically be available if MPI
is installed on your system, though you should check which actual
compiler it wraps. Vendor compilers often produce faster code. On boxes
with Intel CPUs, we suggest using the commercial Intel icc compiler,
which can be downloaded from <a class="reference external" href="http://www.intel.com/software/products/noncom">Intel’s compiler site</a>.</p>
<p>If building a C++ code on your machine requires additional libraries,
then you should list them as part of the LIB variable.</p>
<p>The DEPFLAGS setting is what triggers the C++ compiler to create a
dependency list for a source file. This speeds re-compilation when
source (<em>.cpp) or header (</em>.h) files are edited. Some compilers do not
support dependency file creation, or may use a different switch than -D.
GNU g++ works with -D. Note that when you build SPARTA for the first
time on a new platform, a long list of *.d files will be printed out
rapidly. This is not an error; it is the Makefile doing its normal
creation of dependencies.</p>
</div>
<div class="section" id="step-4">
<span id="start-step-4"></span><h4>2.2.2.5. Step 4<a class="headerlink" href="#step-4" title="Permalink to this headline">¶</a></h4>
<p>The “system-specific settings” section has several parts. Note that if
you change any -D setting in this section, you should do a full
re-compile, after typing “make clean”, which will describe different
clean options.</p>
<p>The SPA_INC variable is used to include options that turn on ifdefs
within the SPARTA code. The options that are currently recognized are:</p>
<ul class="simple">
<li><p>-DSPARTA_GZIP</p></li>
<li><p>-DSPARTA_JPEG</p></li>
<li><p>-DSPARTA_PNG</p></li>
<li><p>-DSPARTA_FFMPEG</p></li>
<li><p>-DSPARTA_MAP</p></li>
<li><p>-DSPARTA_UNORDERED_MAP</p></li>
<li><p>-DSPARTA_SMALL</p></li>
<li><p>-DSPARTA_BIG</p></li>
<li><p>-DSPARTA_BIGBIG</p></li>
<li><p>-DSPARTA_LONGLONG_TO_LONG</p></li>
</ul>
<p>The read_data and dump commands will read/write gzipped files if you
compile with -DSPARTA_GZIP. It requires that your Linux support the
“popen” command.</p>
<p>If you use -DSPARTA_JPEG and/or -DSPARTA_PNG, the <a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump command</span></a> will be able to write out JPEG and/or PNG image files respectively. If not, it will only be able to write out PPM
image files. For JPEG files, you must also link SPARTA with a JPEG
library, as described below. For PNG files, you must also link SPARTA
with a PNG library, as described below.</p>
<p>If you use -DSPARTA_FFMPEG, the <a class="reference internal" href="dump_image.html#command-dump-image"><span class="std std-ref">dump movie</span></a> command
will be available to support on-the-fly generation of rendered movies
the need to store intermediate image files. It requires that your
machines supports the “popen” function in the standard runtime library
and that an FFmpeg executable can be found by SPARTA during the run.</p>
<p>If you use -DSPARTA_MAP, SPARTA will use the STL map class for hash
tables. This is less efficient than the unordered map class which is not
yet supported by all C++ compilers. If you use -DSPARTA_UNORDERED_MAP,
SPARTA will use the unordered_map class for hash tables and will assume
it is part of the STL (e.g. this works for Clang++). The default is to
use the unordered map class from the “tri1” extension to the STL which
is supported by most compilers. So only use either of these options if
the build complains that unordered maps are not recognized.</p>
<p>Use at most one of the -DSPARTA_SMALL, -DSPARTA_BIG, -DSPARTA_BIGBIG
settings. The default is -DSPARTA_BIG. These refer to use of 4-byte
(small) vs 8-byte (big) integers within SPARTA, as described in
src/spatype.h. The only reason to use the BIGBIG setting is if you have
a regular grid with more than ~2 billion grid cells or a hierarchical
grid with enough levels that grid cell IDs cannot fit in a 32-bit
integer. In either case, SPARTA will generate an error message for “Cell
ID has too many bits”. See <a class="reference internal" href="Section_howto.html#howto-grids"><span class="std std-ref">Details of grid geometry in SPARTA</span></a> of the manual for details on how cell IDs are formatted. The only reason
to use the SMALL setting is if your machine does not support 64-bit
integers.</p>
<p>In all cases, the size of problem that can be run on a per-processor
basis is limited by 4-byte integer storage to about 2 billion particles
per processor (2^31), which should not normally be a restriction since
such a problem would have a huge per-processor memory and would run very
slowly in terms of CPU secs/timestep.</p>
<p>The -DSPARTA_LONGLONG_TO_LONG setting may be needed if your system or
MPI version does not recognize “long long” data types. In this case a
“long” data type is likely already 64-bits, in which case this setting
will use that data type.</p>
<p>Using one of the -DPACK_ARRAY, -DPACK_POINTER, and -DPACK_MEMCPY options
can make for faster parallel FFTs on some platforms. The -DPACK_ARRAY
setting is the default. See the <a class="reference internal" href="compute_fft_grid.html#command-compute-fft-grid"><span class="std std-ref">compute fft/grid command</span></a> for info about FFTs. See
Step 6 below for info about building SPPARKS with an FFT library.</p>
</div>
<div class="section" id="step-5">
<span id="start-step-5"></span><h4>2.2.2.6. Step 5<a class="headerlink" href="#step-5" title="Permalink to this headline">¶</a></h4>
<p>The 3 MPI variables are used to specify an MPI library to build SPARTA
with.</p>
<p>If you want SPARTA to run in parallel, you must have an MPI library
installed on your platform. If you use an MPI-wrapped compiler, such as
“mpicc” to build, you should be able to leave these 3 variables blank;
the MPI wrapper knows where to find the needed files. If not, and MPI is
installed on your system in the usual place (under /usr/local), you also
may not need to specify these 3 variables. On some large parallel
machines which use “modules” for their compile/link environements, you
may simply need to include the correct module in your build environment.
Or the parallel machine may have a vendor-provided MPI which the
compiler has no trouble finding.</p>
<p>Failing this, with these 3 variables you can specify where the mpi.h
file is found (via MPI_INC), and the MPI library file is found (via
MPI_PATH), and the name of the library file (via MPI_LIB). See
Makefile.serial for an example of how this can be done.</p>
<p>If you are installing MPI yourself, we recommend MPICH 1.2 or 2.0 or
OpenMPI. MPICH can be downloaded from the <a class="reference external" href="http://www-unix.mcs.anl.gov/mpi">Argonne MPI site</a>. OpenMPI can be downloaded the
<a class="reference external" href="http://www.open-mpi.org">OpenMPI site</a>. If you are running on a big
parallel platform, your system admins or the vendor should have already
installed a version of MPI, which will be faster than MPICH or OpenMPI,
so find out how to build and link with it. If you use MPICH or OpenMPI,
you will have to configure and build it for your platform. The MPI
configure script should have compiler options to enable you to use the
same compiler you use for the SPARTA build, which can avoid problems
that can arise when linking SPARTA to the MPI library.</p>
<p>If you just want to run SPARTA on a single processor, you can use the
dummy MPI library provided in src/STUBS, since you don’t need a true MPI
library installed on your system. You will also need to build the STUBS
library for your platform before making SPARTA itself. From the src
directory, type “make mpi-stubs”, or from within the STUBS dir, type
“make” and it should create a libmpi.a suitable for linking to SPARTA.
If this build fails, you will need to edit the STUBS/Makefile for your
platform.</p>
<p>The file STUBS/mpi.cpp provides a CPU timer function called MPI_Wtime()
that calls gettimeofday() . If your system doesn’t support
gettimeofday() , you’ll need to insert code to call another timer. Note
that the ANSI-standard function clock() function rolls over after an
hour or so, and is therefore insufficient for timing long SPARTA
simulations.</p>
</div>
<div class="section" id="step-6">
<span id="start-step-6"></span><h4>2.2.2.7. Step 6<a class="headerlink" href="#step-6" title="Permalink to this headline">¶</a></h4>
<p>The 3 FFT variables allow you to specify an FFT library which SPARTA
uses (for performing 1d FFTs) when built with its FFT package, which
contains commands that invoke FFTs.</p>
<p>SPARTA supports various open-source or vendor-supplied FFT libraries for
this purpose. If you leave these 3 variables blank, SPARTA will use the
open-source <a class="reference external" href="http://kissfft.sf.net">KISS FFT library</a>, which is
included in the SPARTA distribution. This library is portable to all
platforms and for typical SPARTA simulations is almost as fast as FFTW
or vendor optimized libraries. If you are not including the FFT package
in your build, you can also leave the 3 variables blank.</p>
<p>Otherwise, select which kinds of FFTs to use as part of the FFT_INC
setting by a switch of the form -DFFT_XXX. Recommended values for XXX
are: MKL or FFTW3. FFTW2 and NONE are supported as legacy options.
Selecting -DFFT_FFTW will use the FFTW3 library and -DFFT_NONE will use
the KISS library described above. described above.</p>
<p>You may also need to set the FFT_INC, FFT_PATH, and FFT_LIB variables,
so the compiler and linker can find the needed FFT header and library
files. Note that on some large parallel machines which use “modules” for
their compile/link environements, you may simply need to include the
correct module in your build environment. Or the parallel machine may
have a vendor-provided FFT library which the compiler has no trouble
finding.</p>
<p>FFTW is a fast, portable library that should also work on any platform.
You can download it from <a class="reference external" href="http://www.fftw.org">www.fftw.org</a>. Both
the legacy version 2.1.X and the newer 3.X versions are supported as
-DFFT_FFTW2 or -DFFT_FFTW3. Building FFTW for your box should be as
simple as ./configure; make. Note that on some platforms FFTW2 has been
pre-installed, and uses renamed files indicating the precision it was
compiled with, e.g. sfftw.h, or dfftw.h instead of fftw.h. In this case,
you can specify an additional define variable for FFT_INC called
-DFFTW_SIZE, which will select the correct include file. In this case,
for FFT_LIB you must also manually specify the correct library, namely
-lsfftw or -ldfftw.</p>
<p>The FFT_INC variable also allows for a -DFFT_SINGLE setting that will
use single-precision FFTs, which can speed-up the calculation,
particularly in parallel or on GPUs. Fourier transform and related PPPM
operations are somewhat insensitive to floating point truncation errors
and thus do not always need to be performed in double precision. Using
the -DFFT_SINGLE setting trades off a little accuracy for reduced memory
use and parallel communication costs for transposing 3d FFT data.</p>
</div>
<div class="section" id="step-7">
<span id="start-step-7"></span><h4>2.2.2.8. Step 7<a class="headerlink" href="#step-7" title="Permalink to this headline">¶</a></h4>
<p>The 3 JPG variables allow you to specify a JPEG and/or PNG library which
SPARTA uses when writing out JPEG or PNG files via the <a class="reference internal" href="dump_image.html#command-dump-image"><span class="std std-ref">dump image command</span></a>. These can be left blank if you do
not use the -DSPARTA_JPEG or -DSPARTA_PNG switches discussed above in
Step 4, since in that case JPEG/PNG output will be disabled.</p>
<p>A standard JPEG library usually goes by the name libjpeg.a or libjpeg.so
and has an associated header file jpeglib.h. Whichever JPEG library you
have on your platform, you’ll need to set the appropriate JPG_INC,
JPG_PATH, and JPG_LIB variables, so that the compiler and linker can
find it.</p>
<p>A standard PNG library usually goes by the name libpng.a or libpng.so
and has an associated header file png.h. Whichever PNG library you have
on your platform, you’ll need to set the appropriate JPG_INC, JPG_PATH,
and JPG_LIB variables, so that the compiler and linker can find it.</p>
<p>As before, if these header and library files are in the usual place on
your machine, you may not need to set these variables.</p>
</div>
<div class="section" id="step-8">
<span id="start-step-8"></span><h4>2.2.2.9. Step 8<a class="headerlink" href="#step-8" title="Permalink to this headline">¶</a></h4>
<p>Note that by default none of the SPARTA optional packages are installed.
To build SPARTA with optional packages, see <a class="reference internal" href="#start-optional-packages"><span class="std std-ref">this section</span></a>
below, before proceeding to Step 9.</p>
</div>
<div class="section" id="step-9">
<span id="start-step-9"></span><h4>2.2.2.10. Step 9<a class="headerlink" href="#step-9" title="Permalink to this headline">¶</a></h4>
<p>That’s it. Once you have a correct Makefile.foo, and you have pre-built
any other needed libraries (e.g. MPI), all you need to do from the src
directory is type one of the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make foo
make -j N foo
gmake foo
gmake -j N foo
</pre></div>
</div>
<p>The -j or -j N switches perform a parallel build which can be much
faster, depending on how many cores your compilation machine has. N is
the number of cores the build runs on.</p>
<p>You should get the executable spa_foo when the build is complete.</p>
<hr class="docutils" />
</div>
</div>
<div class="section" id="steps-to-build-a-sparta-executable-using-cmake">
<span id="start-steps-build-cmake"></span><h3><a class="toc-backref" href="#id23">2.2.3. Steps to build a SPARTA executable using CMake:</a><a class="headerlink" href="#steps-to-build-a-sparta-executable-using-cmake" title="Permalink to this headline">¶</a></h3>
<div class="section" id="start-step-c0">
<span id="id2"></span><h4>2.2.3.1. Step 0<a class="headerlink" href="#start-step-c0" title="Permalink to this headline">¶</a></h4>
<p>Please review <a class="reference external" href="https://github.com/sparta/sparta/blob/master/BUILD_CMAKE.md">https://github.com/sparta/sparta/blob/master/BUILD_CMAKE.md</a> and ensure that
CMake version 3.10.0 or greater is installed:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>which cmake
which cmake3
cmake --version
</pre></div>
</div>
<p>On clusters and supercomputers one can use modules to load cmake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>module avail cmake
module load &lt;CMAKE&gt;
</pre></div>
</div>
<p>On Linux one may use apt, yum, or pacman to install cmake.</p>
<p>On Mac one may use brew or macports to install cmake.</p>
</div>
<div class="section" id="start-step-c1">
<span id="id3"></span><h4>2.2.3.2. Step 1<a class="headerlink" href="#start-step-c1" title="Permalink to this headline">¶</a></h4>
<p>The cmake directory contains the CMake source files for SPARTA. Create a build
directory and from within the build directory, run cmake:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake -LH -DSPARTA_MACHINE<span class="o">=</span>tutorial /path/to/sparta/cmake
</pre></div>
</div>
<p>This will generate the default Makefiles and print the SPARTA CMake options. To
list the generated targets, do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make <span class="nb">help</span>
</pre></div>
</div>
<p>Now you can try to build the SPARTA binaries with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make
</pre></div>
</div>
<p>If everything works, an executable named spa_tutorial and a library named
libsparta.a will be produced in build/src.</p>
</div>
<div class="section" id="start-step-c2">
<span id="id4"></span><h4>2.2.3.3. Step 2<a class="headerlink" href="#start-step-c2" title="Permalink to this headline">¶</a></h4>
<p>If Step 1 did not work, see if you can use any system presets from
/path/to/sparta/cmake/presets. To select a preset:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build

<span class="c1"># Clear the CMake files</span>
rm -rf CMake*

cmake -C /path/to/sparta/cmake/presets/&lt;NAME&gt;.cmake -DSPARTA_MACHINE<span class="o">=</span>tutorial /path/to/sparta/cmake
make
</pre></div>
</div>
</div>
<div class="section" id="start-step-c3">
<span id="id5"></span><h4>2.2.3.4. Step 3<a class="headerlink" href="#start-step-c3" title="Permalink to this headline">¶</a></h4>
<p>If Step 2 did not work, look at cmake -LH for a list of SPARTA CMake options and their
meaning, then modify one or more of those options by doing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
rm -rf CMake*
cmake -C /path/to/sparta/cmake/presets/&lt;NAME&gt;.cmake -D&lt;OPTION_NAME&gt;<span class="o">=</span>&lt;VALUE&gt; /path/to/sparta/cmake
make
</pre></div>
</div>
<p>where &lt;OPTION_NAME&gt; and &lt;VALUE&gt; correspond to valid option value pairs listed by
cmake -LH. For the SPARTA_DEFAULT_CXX_COMPILE_FLAGS option, see <a class="reference internal" href="#start-step-c4"><span class="std std-ref">Step 4</span></a>.</p>
<p>For a full list of CMake option value pairs, see cmake -LAH. The most relevant
CMake options (with example values) for our purposes here are:</p>
<div class="highlight-make notranslate"><div class="highlight"><pre><span></span><span class="nv">-DCMAKE_C_COMPILER</span><span class="o">=</span>gcc
<span class="nv">-DCMAKE_CXX_COMPILER</span><span class="o">=</span>/usr/local/bin/g++
<span class="nv">-DCMAKE_CXX_FLAGS</span><span class="o">=</span>-O3
</pre></div>
</div>
<p>If your cmake command line is getting too long, consider placing it in a bash
script and escaping newlines. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake <span class="se">\</span>
-C  /path/to/sparta/cmake/presets/&lt;NAME&gt;.cmake <span class="se">\</span>
-D  -D&lt;OPTION_NAME&gt;<span class="o">=</span>&lt;VALUE&gt; <span class="se">\</span>
/path/to/sparta/cmake :pre
</pre></div>
</div>
</div>
<div class="section" id="start-step-c4">
<span id="id6"></span><h4>2.2.3.5. Step 4<a class="headerlink" href="#start-step-c4" title="Permalink to this headline">¶</a></h4>
<p>The SPARTA_DEFAULT_CXX_COMPILE_FLAGS option passes flags to the compiler when
building object files.  Note that if you change any -D setting in this section,
you should do a full re-compile, after typing “make clean”.</p>
<p>The SPARTA_DEFAULT_CXX_COMPILE_FLAGS option is typically used to include options
that turn on ifdefs within the SPARTA code.  The options that are currently recogized are:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-DSPARTA_GZIP
-DSPARTA_JPEG
-DSPARTA_PNG
-DSPARTA_FFMPEG
-DSPARTA_MAP
-DSPARTA_UNORDERED_MAP
-DSPARTA_SMALL
-DSPARTA_BIG
-DSPARTA_BIGBIG
-DSPARTA_LONGLONG_TO_LONG :ul
</pre></div>
</div>
<p>The read_data and dump commands will read/write gzipped files if you
compile with -DSPARTA_GZIP.  It requires that your Linux support the
“popen” command.</p>
<p>If you use -DSPARTA_JPEG and/or -DSPARTA_PNG, the <a class="reference internal" href="dump_image.html#command-dump-image"><span class="std std-ref">dump image command</span></a>
will be able to write out JPEG and/or PNG
image files respectively. If not, it will only be able to write out
PPM image files.  For JPEG files, you must also link SPARTA with a
JPEG library, as described below.  For PNG files, you must also link
SPARTA with a PNG library, as described below.</p>
<p>If you use -DSPARTA_FFMPEG, the <a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump movie</span></a> command
will be available to support on-the-fly generation of rendered movies
the need to store intermediate image files.  It requires that your
machines supports the “popen” function in the standard runtime library
and that an FFmpeg executable can be found by SPARTA during the run.</p>
<p>If you use -DSPARTA_MAP, SPARTA will use the STL map class for hash
tables.  This is less efficient than the unordered map class which is
not yet supported by all C++ compilers.  If you use
-DSPARTA_UNORDERED_MAP, SPARTA will use the unordered_map class for
hash tables and will assume it is part of the STL (e.g. this works for
Clang++).  The default is to use the unordered map class from the
“tri1” extension to the STL which is supported by most compilers.  So
only use either of these options if the build complains that unordered
maps are not recognized.</p>
<p>Use at most one of the -DSPARTA_SMALL, -DSPARTA_BIG, -DSPARTA_BIGBIG
settings.  The default is -DSPARTA_BIG.  These refer to use of 4-byte
(small) vs 8-byte (big) integers within SPARTA, as described in
src/spatype.h.  The only reason to use the BIGBIG setting is if you
have a regular grid with more than ~2 billion grid cells or a
hierarchical grid with enough levels that grid cell IDs cannot fit in
a 32-bit integer.  In either case, SPARTA will generate an error
message for “Cell ID has too many bits”.  See “Section
4.8”_Section_howto.html#howto_8 of the manual for details on how cell
IDs are formatted.  The only reason to use the SMALL setting is if
your machine does not support 64-bit integers.</p>
<p>In all cases, the size of problem that can be run on a per-processor
basis is limited by 4-byte integer storage to about 2 billion
particles per processor (2^31), which should not normally be a
restriction since such a problem would have a huge per-processor
memory and would run very slowly in terms of CPU secs/timestep.</p>
<p>The -DSPARTA_LONGLONG_TO_LONG setting may be needed if your system or
MPI version does not recognize “long long” data types.  In this case a
“long” data type is likely already 64-bits, in which case this setting
will use that data type.</p>
<p>Using one of the -DPACK_ARRAY, -DPACK_POINTER, and -DPACK_MEMCPY
options can make for faster parallel FFTs on some platforms.  The
-DPACK_ARRAY setting is the default.  See the “compute
fft/grid”_compute_fft_grid.html command for info about FFTs.  See STEP
??? below for info about building SPPARKS with an FFT library.</p>
</div>
<div class="section" id="start-step-c5">
<span id="id7"></span><h4>2.2.3.6. Step 5<a class="headerlink" href="#start-step-c5" title="Permalink to this headline">¶</a></h4>
<p>This step is optional. Once you get <a class="reference internal" href="#start-step-c3"><span class="std std-ref">Step 3</span></a> and <a class="reference internal" href="#start-step-c4"><span class="std std-ref">Step 4</span></a> working by modifying the
options to the cmake command, try setting the same options in
/path/to/sparta/cmake/presets/&lt;NEW&gt;.cmake by copying
/path/to/sparta/cmake/presets/&lt;NAME&gt;.cmake and modifying the cmake
source code. Note that the CMake cache is sticky and will only evict a
cached option value pair if you use -D or the FORCE argument to CMake’s set
routine.</p>
<p>Now just do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
rm -rf CMake*
cmake -C /path/to/sparta/cmake/presets/&lt;NEW&gt;.cmake /path/to/sparta/cmake
make
</pre></div>
</div>
<p>consider sharing and vetting &lt;NEW&gt;.cmake by opening a pull request at
<a class="reference external" href="https://github.com/sparta/sparta/">https://github.com/sparta/sparta/</a>.</p>
</div>
<div class="section" id="start-step-c6">
<span id="id8"></span><h4>2.2.3.7. Step 6<a class="headerlink" href="#start-step-c6" title="Permalink to this headline">¶</a></h4>
<p>This step explains how to enable and select MPI in the SPARTA CMake
configuration. There may already be a preset in
/path/to/sparta/cmake/presets that selects the correct MPI installation.</p>
<p>By default, SPARTA configures with MPI enabled and cmake will print which MPI
was selected. To build serial binaries, use SPARTA’s MPI_STUBS package:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DPKG_MPI_STUBS<span class="o">=</span>ON /path/to/sparta/cmake
</pre></div>
</div>
<p>You may want a different MPI installation than CMake finds. CMake uses module
files such as FindMPI.cmake to handle wiring in a given installation of a
library and its headers. If you’re on a cluster or supercomputer, use module
before running cmake so that cmake finds the MPI installation you’d like to
use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show which modules are loaded</span>
module list

<span class="c1"># Show which modules are available</span>
module avail

module load &lt;MPI&gt; :pre
</pre></div>
</div>
<p>On Linux one may use apt, yum, or pacman to install MPI.</p>
<p>On Mac one may use brew or macports to install MPI.</p>
<p>Verify that cmake found the correct MPI installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
rm -rf CMake*

<span class="c1"># cmake should print &quot;Found MPI*&quot; strings</span>
cmake <span class="o">[</span>options<span class="o">]</span> /path/to/sparta/cmake :pre
</pre></div>
</div>
<p>Note that if the preset file you’re using enables PKG_MPI_STUBS, MPI will not be
searched for unless you explicitly disable PKG_MPI_STUBS in the preset file.</p>
<p>If you’d like to use a custom MPI installation or cmake is not locating the MPI
installation you’ve selected via the module command or package manager, try
export MPI_ROOT=/path/to/mpi/install before running cmake. Otherwise, please see
<a class="reference external" href="https://cmake.org/cmake/help/v3.10/module/FindMPI.html#variables-for-locating-mpi">https://cmake.org/cmake/help/v3.10/module/FindMPI.html#variables-for-locating-mpi</a>.
Note that this documentation link is for CMake version 3.10.</p>
</div>
<div class="section" id="start-step-c7">
<span id="id9"></span><h4>2.2.3.8. Step 7<a class="headerlink" href="#start-step-c7" title="Permalink to this headline">¶</a></h4>
<p>You may select between three thiry party libraries (TPL) for FFT which SPARTA uses when
configured with cmake -DFFT={FFTW2,FFTW3,MKL}. SPARTA also provides a FFT
package which can be selected with cmake -DPKG_FFT=ON.</p>
<p>You may need to install the FFT TPL you’re interested in using. If you’re on a
cluster or supercomputer, use module before running cmake so that cmake finds
the FFT installation you’d like to use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Show which modules are loaded</span>
module list

<span class="c1"># Show which modules are available</span>
module avail

module load &lt;FFT&gt; :pre
</pre></div>
</div>
<p>On Linux one may use apt, yum, or pacman to install FFT.</p>
<p>On Mac one may use brew or macports to install FFT.</p>
<p>Verify that cmake found the correct MPI installation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
rm -rf CMake*

<span class="c1"># cmake should print &quot;Found FFT*&quot; strings</span>
cmake <span class="o">[</span>options<span class="o">]</span> /path/to/sparta/cmake :pre
</pre></div>
</div>
<p>Note that if the preset file you’re using enables PKG_FFT, FFT will not be
searched for unless you explicitly disable PKG_FFT in the preset file.</p>
<p>If you’d like to use a custom FFT installation or cmake is not locating the FFT
installation you’ve selected via the module command or package manager, try
export FFT_ROOT=/path/to/fft/install before running cmake. Otherwise, please
open an issue at <a class="reference external" href="https://github.com/sparta/sparta/issues">https://github.com/sparta/sparta/issues</a>.</p>
</div>
<div class="section" id="start-step-c8">
<span id="id10"></span><h4>2.2.3.9. Step 8<a class="headerlink" href="#start-step-c8" title="Permalink to this headline">¶</a></h4>
<p>You may select between 2 TPLs, JPEG or PNG, for writing out JPEG or PNG files
via the “dump image”_dump_image.html command. To select a TPL, use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DBUILD_JPEG<span class="o">=</span>ON /path/to/sparta/cmake
</pre></div>
</div>
<p>or:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DBUILD_PNG<span class="o">=</span>ON /path/to/sparta/cmake
</pre></div>
</div>
<p>If you’d like to use a custom jpeg or png installation, please see
<a class="reference external" href="https://cmake.org/cmake/help/v3.10/module/FindJPEG.html">https://cmake.org/cmake/help/v3.10/module/FindJPEG.html</a> or
<a class="reference external" href="https://cmake.org/cmake/help/v3.10/module/FindPNG.html">https://cmake.org/cmake/help/v3.10/module/FindPNG.html</a>. Note that these
documentation links are for CMake version 3.10.</p>
</div>
<div class="section" id="start-step-c9">
<span id="id11"></span><h4>2.2.3.10. Step 9<a class="headerlink" href="#start-step-c9" title="Permalink to this headline">¶</a></h4>
<p>By default, none of the SPARTA optional packages are installed. To build SPARTA
with optional packages, use:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DPKG_XXX<span class="o">=</span>ON /path/to/sparta/cmake
</pre></div>
</div>
<p>Where XXX is the package to enable. For a full list of optional packages, see:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -LH /path/to/sparta/cmake
</pre></div>
</div>
</div>
<div class="section" id="step-10">
<span id="start-step-c10"></span><h4>2.2.3.11. Step 10<a class="headerlink" href="#step-10" title="Permalink to this headline">¶</a></h4>
<p>Once you have a correct cmake command line or the &lt;NAME&gt;.cmake preset file, just
do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake <span class="o">[</span>OPTIONS<span class="o">]</span> /path/to/sparta/cmake
</pre></div>
</div>
<p>or:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -C /path/to/sparta/cmake/presets/&lt;NAME&gt;.cmake -DSPARTA_MACHINE<span class="o">=</span>tutorial /path/to/sparta/cmake
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make -j N
</pre></div>
</div>
<p>The -j or -j N switches perform a parallel build which can be much faster,
depending on how many cores your compilation machine has. N is the number of
cores the build runs on.</p>
<p>You should get build/src/spa_tutorial and build/src/libsparta.a.</p>
</div>
</div>
<div class="section" id="errors-that-can-occur-when-making-sparta">
<span id="start-errors-occur"></span><h3><a class="toc-backref" href="#id24">2.2.4. Errors that can occur when making SPARTA:</a><a class="headerlink" href="#errors-that-can-occur-when-making-sparta" title="Permalink to this headline">¶</a></h3>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If an error occurs when building SPARTA, the compiler or linker will state very explicitly what the problem is. The error message should give you a hint as to which of the steps above has failed, and what you need to do in order to fix it. Building a code with a Makefile is a very logical process. The compiler and linker need to find the appropriate files and those files need to be compatible with SPARTA source files. When a make fails, there is usually a very simple reason, which you or a local expert will need to fix.</p>
</div>
<p>Here are two non-obvious errors that can occur:</p>
<p>(1) If the make command breaks immediately with errors that indicate it
can’t find files with a “*” in their names, this can be because your
machine’s native make doesn’t support wildcard expansion in a makefile.
Try gmake instead of make. If that doesn’t work, try using a -f switch
with your make command to use a pre-generated Makefile.list which
explicitly lists all the needed files, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make makelist
make -f Makefile.list g++
gmake -f Makefile.list mac
</pre></div>
</div>
<p>The first “make” command will create a current Makefile.list with all
the file names in your src dir. The 2nd “make” command (make or gmake)
will use it to build SPARTA.</p>
<p>(2) If you get an error that says something like ‘identifier “atoll” is
undefined’, then your machine does not support “long long” integers. Try
using the -DSPARTA_LONGLONG_TO_LONG setting described above in Step 4.</p>
<hr class="docutils" />
</div>
<div class="section" id="additional-build-tips-using-make">
<span id="start-additional-build-make"></span><h3><a class="toc-backref" href="#id25">2.2.5. Additional build tips using make:</a><a class="headerlink" href="#additional-build-tips-using-make" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Building SPARTA for multiple platforms.</dt><dd><p>You can make SPARTA for multiple platforms from the same src directory.
Each target creates its own object sub-directory called Obj_name where it stores the system-specific *.o files.</p>
</dd>
<dt>Cleaning up.</dt><dd><p>Typing “make clean-all” or “make clean-foo” will delete *.o object files created when SPARTA is built, for either all builds or for a particular machine.</p>
</dd>
</dl>
</div>
<div class="section" id="additional-build-tips-using-cmake">
<h3><a class="toc-backref" href="#id26">2.2.6. Additional build tips using CMake:</a><a class="headerlink" href="#additional-build-tips-using-cmake" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>Building SPARTA for multiple platforms.</dt><dd><p>It’s best to build SPARTA for multiple platforms from different build directories. However, each target creates its own spa_TARGET binary and multiple targets can be built from the same build directory. Note that the *.o object files in build/src will reflective of the most recent build configuration. Also note that if BUILD_SHARED_LIBS was enabled, libsparta will be reflective of the most recent build configuration.</p>
</dd>
<dt>Cleaning up.</dt><dd><p>Typing “make clean” will delete all binary files for the most recent build configuration.</p>
</dd>
</dl>
</div>
<div class="section" id="building-for-a-mac">
<span id="start-building-mac"></span><h3><a class="toc-backref" href="#id27">2.2.7. Building for a Mac:</a><a class="headerlink" href="#building-for-a-mac" title="Permalink to this headline">¶</a></h3>
<p>OS X is BSD Unix, so it should just work.  See the Makefile.mac or
cmake/presets/mac.cmake file.</p>
</div>
<div class="section" id="building-for-windows">
<span id="start-building-windows"></span><h3><a class="toc-backref" href="#id28">2.2.8. Building for Windows:</a><a class="headerlink" href="#building-for-windows" title="Permalink to this headline">¶</a></h3>
<p>At some point we may provide a pre-built Windows executable for SPARTA.
Until then you will need to build an executable from source files.</p>
<p>One way to do this is install and use cygwin to build SPARTA with a
standard Linux make or CMake, just as you would on any Linux box.</p>
<p>You can also import the *.cpp and *.h files into Microsoft Visual
Studio. If someone does this and wants to provide project files or other
Windows build tips, please send them to the
<a class="reference external" href="http://sparta.sandia.gov/authors.html">developers</a> and we will
include them in the distribution.</p>
</div>
</div>
<div class="section" id="making-sparta-with-optional-packages">
<span id="start-optional-packages"></span><h2><a class="toc-backref" href="#id16">2.3. Making SPARTA with optional packages</a><a class="headerlink" href="#making-sparta-with-optional-packages" title="Permalink to this headline">¶</a></h2>
<p>This section has the following sub-sections:</p>
<div class="contents local topic" id="id12">
<ul class="simple">
<li><p><a class="reference internal" href="#package-basics" id="id29">Package basics:</a></p></li>
<li><p><a class="reference internal" href="#including-excluding-packages-with-make" id="id30">Including/excluding packages with make:</a></p></li>
<li><p><a class="reference internal" href="#including-excluding-packages-with-cmake" id="id31">Including/excluding packages with CMake:</a></p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="package-basics">
<span id="start-package-basics"></span><h3><a class="toc-backref" href="#id29">2.3.1. Package basics:</a><a class="headerlink" href="#package-basics" title="Permalink to this headline">¶</a></h3>
<p>The source code for SPARTA is structured as a set of core files which
are always included, plus optional packages. Packages are groups of
files that enable a specific set of features. For example, the FFT
package which includes a <a class="reference internal" href="compute_fft_grid.html#command-compute-fft-grid"><span class="std std-ref">compute fft/grid command</span></a> and a 2d and 3d FFT library.</p>
<p>For make:</p>
<p>You can see the list of all packages by typing “make package” from
within the src directory of the SPARTA distribution. This also lists
various make commands that can be used to manipulate packages.</p>
<p>For CMake:</p>
<p>You can see the list of all packages by typing “cmake -DSPARTA_LIST_PKGS=ON”
from within the build directory.</p>
<p>If you use a command in a SPARTA input script that is part of a package,
you must have built SPARTA with that package, else you will get an error
that the style is invalid or the command is unknown. Every command’s doc
page specfies if it is part of a package.</p>
<hr class="docutils" />
</div>
<div class="section" id="including-excluding-packages-with-make">
<span id="start-includingexcluding"></span><h3><a class="toc-backref" href="#id30">2.3.2. Including/excluding packages with make:</a><a class="headerlink" href="#including-excluding-packages-with-make" title="Permalink to this headline">¶</a></h3>
<p>To use (or not use) a package you must include it (or exclude it) before
building SPARTA. From the src directory, this is typically as simple as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make yes-fft
make g++
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make no-fft
make g++
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should NOT include/exclude packages and build SPARTA in a single make command using multiple targets, e.g. <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">yes-fft</span> <span class="pre">g++</span></code>. This is because the make procedure creates a list of source files that will be out-of-date for the build if the package configuration changes within the same command.</p>
</div>
<p>Some packages have individual files that depend on other packages being
included. SPARTA checks for this and does the right thing. I.e.
individual files are only included if their dependencies are already
included. Likewise, if a package is excluded, other files dependent on
that package are also excluded.</p>
<p>If you will never run simulations that use the features in a particular
packages, there is no reason to include it in your build.</p>
<p>When you download a SPARTA tarball, no packages are pre-installed in the
src directory.</p>
<p>Packages are included or excluded by typing “make yes-name” or “make
no-name”, where “name” is the name of the package in lower-case, e.g.
name = fft for the FFT package. You can also type “make yes-all”, or
“make no-all” to include/exclude all packages. Type “make package” to
see all of the package-related make options.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Inclusion/exclusion of a package works by simply moving files back and forth between the main src directory and sub-directories with the package name (e.g. src/FFT or src/KOKKOS), so that the files are seen or not seen when SPARTA is built. After you have included or excluded a package, you must re-build SPARTA.</p>
</div>
<p>Additional package-related make options exist to help manage SPARTA
files that exist in both the src directory and in package
sub-directories. You do not normally need to use these commands unless
you are editing SPARTA files.</p>
<p>Typing “make package-update” or “make pu” will overwrite src files with
files from the package sub-directories if the package has been included.
It should be used after a patch is installed, since patches only update
the files in the package sub-directory, but not the src files. Typing
“make package-overwrite” will overwrite files in the package
sub-directories with src files.</p>
<p>Typing “make package-status” or “make ps” will show which packages are
currently included. For those that are included, it will list any files
that are different in the src directory and package sub-directory.
Typing “make package-diff” lists all differences between these files.
Again, type “make package” to see all of the package-related make
options.</p>
<hr class="docutils" />
</div>
<div class="section" id="including-excluding-packages-with-cmake">
<span id="start-includingexcluding-cmake"></span><h3><a class="toc-backref" href="#id31">2.3.3. Including/excluding packages with CMake:</a><a class="headerlink" href="#including-excluding-packages-with-cmake" title="Permalink to this headline">¶</a></h3>
<p>To use (or not use) a package you must include it (or exclude it)
before building SPARTA.  From the build directory, do:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DPKG_FFT<span class="o">=</span>ON /path/to/sparta/cmake
make -j
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -DPKG_FFT<span class="o">=</span>OFF /path/to/sparta/cmake
make -j :pre
</pre></div>
</div>
<p>Some packages have individual files that depend on other packages
being included.  SPARTA checks for this and does the right thing.
I.e. individual files are only included if their dependencies are
already included.  Likewise, if a package is excluded, other files
dependent on that package are also excluded.</p>
<p>If you will never run simulations that use the features in a
particular packages, there is no reason to include it in your build.</p>
<p>When you download a SPARTA tarball, no packages are pre-installed in
the build/src directory.</p>
<p>Packages are included or excluded by typing “cmake -DPKG_NAME=ON” or
“cmake -DPKG_NAME=OFF”, where “NAME” is the name of the package in upper-case,
e.g. name = FFT for the FFT package. You can also type “cmake
-DSPARTA_ENABLE_ALL_PKGS=ON”, or “cmake -DSPARTA_DISABLE_ALL_PKGS=ON” to
include or exclude all packages. Type “cmake -DSPARTA_LIST_PKGS=ON” to
see all of the package-related CMake options.</p>
<p>NOTE: Inclusion or exclusion of a package works by setting CMake boolean
variables to generate the correct Makefile targets and dependencies. After you
have included or excluded a package, you must re-build SPARTA.</p>
<p>If a SPARTA package has source code changes, simply run “make” to rebuild SPARTA
with these changes.</p>
<p>Typing “cmake” from the build directory will show which packages are currently
included.</p>
<hr class="docutils" />
</div>
</div>
<div class="section" id="building-sparta-as-a-library">
<span id="start-build-library"></span><h2><a class="toc-backref" href="#id17">2.4. Building SPARTA as a library</a><a class="headerlink" href="#building-sparta-as-a-library" title="Permalink to this headline">¶</a></h2>
<p>SPARTA can be built as either a static or shared library, which can then
be called from another application or a scripting language. See <a class="reference internal" href="Section_howto.html#howto-other-code"><span class="std std-ref">Coupling SPARTA to other codes</span></a> for more info on coupling SPARTA to
other codes. See <a class="reference internal" href="Section_python.html#python"><span class="std std-ref">Python interface to SPARTA</span></a> for more info on wrapping and running SPARTA from Python.</p>
<p>The CMake build system will produce the library static of dynamic libsparta
library in build/src.</p>
<div class="section" id="static-library">
<span id="start-static-library"></span><h3>2.4.1. Static library:<a class="headerlink" href="#static-library" title="Permalink to this headline">¶</a></h3>
<p>CMake builds sparta as a static library in libsparta.a, by default.</p>
<p>To build SPARTA as a static library (“*.a” file on Linux), type</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make foo <span class="nv">mode</span><span class="o">=</span>lib
</pre></div>
</div>
<p>where foo is the machine name. This kind of library is typically used to
statically link a driver application to SPARTA, so that you can insure
all dependencies are satisfied at compile time. This will use the
ARCHIVE and ARFLAGS settings in src/MAKE/Makefile.foo. The build will
create the file libsparta_foo.a which another application can link to.
It will also create a soft link libsparta.a, which will point to the
most recently built static library.</p>
</div>
<div class="section" id="shared-library">
<span id="start-shared-library"></span><h3>2.4.2. Shared library:<a class="headerlink" href="#shared-library" title="Permalink to this headline">¶</a></h3>
<p>To build SPARTA as a shared library (“*.so” file on Linux), which can be
dynamically loaded, e.g. from Python, type</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>make foo <span class="nv">mode</span><span class="o">=</span>shlib
</pre></div>
</div>
<p>or:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake -C /path/to/sparta/cmake/presets/foo.cmake -DBUILD_SHARED_LIBS<span class="o">=</span>ON /path/to/sparta/cmake
make
</pre></div>
</div>
<p>where foo is the machine name. This kind of library is required when
wrapping SPARTA with Python; see <a class="reference internal" href="Section_python.html#python"><span class="std std-ref">Python interface to SPARTA</span></a> for details. This will use the
SHFLAGS and SHLIBFLAGS settings in src/MAKE/Makefile.foo and perform the
build in the directory Obj_shared_foo. This is so that each file can be
compiled with the -fPIC flag which is required for inclusion in a shared
library. The build will create the file libsparta_foo.so which another
application can link to dyamically. It will also create a soft link
libsparta.so, which will point to the most recently built shared
library. This is the file the Python wrapper loads by default.</p>
<p>Note that for a shared library to be usable by a calling program, all
the auxiliary libraries it depends on must also exist as shared
libraries. This will be the case for libraries included with SPARTA,
such as the dummy MPI library in src/STUBS or any package libraries in
lib/packages, since they are always built as shared libraries using the
-fPIC switch. However, if a library like MPI or FFTW does not exist as a
shared library, the shared library build will generate an error. This
means you will need to install a shared library version of the auxiliary
library. The build instructions for the library should tell you how to
do this.</p>
<p>Here is an example of such errors when the system FFTW or provided
lib/colvars library have not been built as shared libraries:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/bin/ld: /usr/local/lib/libfftw3.a(mapflags.o): relocation
R_X86_64_32 against :ref:`.rodata&#39; can not be used when making a shared
object; recompile with -fPIC
/usr/local/lib/libfftw3.a: could not read symbols: Bad value
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/bin/ld: ../../lib/colvars/libcolvars.a(colvarmodule.o):
relocation R_X86_64_32 against`pthread_key_create&#39; can not be used
when making a shared object; recompile with -fPIC
../../lib/colvars/libcolvars.a: error adding symbols: Bad value
</pre></div>
</div>
<p>As an example, here is how to build and install the <a class="reference external" href="http://www-unix.mcs.anl.gov/mpi">MPICH library</a>, a popular open-source
version of MPI, distributed by Argonne National Labs, as a shared
library in the default /usr/local/lib location:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./configure --enable-shared
make
make install
</pre></div>
</div>
<p>You may need to use <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">make</span> <span class="pre">install</span></code> in place of the last line if you
do not have write privileges for /usr/local/lib. The end result should
be the file /usr/local/lib/libmpich.so.</p>
</div>
<div class="section" id="additional-requirement-for-using-a-shared-library">
<span id="start-additional-requirement"></span><h3>2.4.3. Additional requirement for using a shared library:<a class="headerlink" href="#additional-requirement-for-using-a-shared-library" title="Permalink to this headline">¶</a></h3>
<p>The operating system finds shared libraries to load at run-time using
the environment variable LD_LIBRARY_PATH.</p>
<p>Using CMake, ensure that CMAKE_INSTALL_PREFIX is set properly and then run “make
-j install” or add build/src to LD_LIBRARY_PATH in your shell’s environment.</p>
<p>Using make, you may wish to copy the file src/libsparta.so or src/libsparta_g++.so (for example) to a place the system can find it by default, such as /usr/local/lib, or you may wish to add the SPARTA src directory to LD_LIBRARY_PATH, so that the current version of the shared library is always available to programs that use it.</p>
<p>For the csh or tcsh shells, you would add something like this to your
~/.cshrc file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>setenv LD_LIBRARY_PATH <span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span>:/home/sjplimp/sparta/src
</pre></div>
</div>
</div>
<div class="section" id="calling-the-sparta-library">
<span id="start-calling-sparta"></span><h3>2.4.4. Calling the SPARTA library:<a class="headerlink" href="#calling-the-sparta-library" title="Permalink to this headline">¶</a></h3>
<p>Either flavor of library (static or shared) allows one or more SPARTA
objects to be instantiated from the calling program.</p>
<p>When used from a C++ program, all of SPARTA is wrapped in a SPARTA_NS
namespace; you can safely use any of its classes and methods from within
the calling code, as needed.</p>
<p>When used from a C or Fortran program or a scripting language like
Python, the library has a simple function-style interface, provided in
src/library.cpp and src/library.h.</p>
<p>See <a class="reference internal" href="Section_howto.html#howto"><span class="std std-ref">How-to discussions</span></a> of the manual for ideas on how to couple SPARTA to other codes via its library interface.
See <a class="reference internal" href="Section_python.html#python"><span class="std std-ref">Python interface to SPARTA</span></a> of the manual for a
description of the Python wrapper provided with SPARTA that operates
through the SPARTA library interface.</p>
<p>The files src/library.cpp and library.h define the C-style API for using
SPARTA as a library. See <a class="reference internal" href="Section_howto.html#howto-library"><span class="std std-ref">Library interface to SPARTA</span></a> of the manual for a description of
the interface and how to extend it for your needs.</p>
<hr class="docutils" />
</div>
</div>
<div class="section" id="running-sparta">
<span id="start-running-sparta"></span><h2><a class="toc-backref" href="#id18">2.5. Running SPARTA</a><a class="headerlink" href="#running-sparta" title="Permalink to this headline">¶</a></h2>
<p>By default, SPARTA runs by reading commands from standard input. Thus if
you run the SPARTA executable by itself, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spa_g++
</pre></div>
</div>
<p>it will simply wait, expecting commands from the keyboard. Typically you
should put commands in an input script and use I/O redirection, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spa_g++ &lt; in.file
</pre></div>
</div>
<p>For parallel environments this should also work. If it does not, use the
‘-in’ command-line switch, e.g.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>spa_g++ -in in.file
</pre></div>
</div>
<p><a class="reference internal" href="Section_commands.html#commands"><span class="std std-ref">Commands</span></a> describes how input scripts are structured and what commands they contain.</p>
<p>You can test SPARTA on any of the sample inputs provided in the examples
or bench directory. Input scripts are named in.* and sample outputs are
named log.*.name.P where name is a machine and P is the number of
processors it was run on.</p>
<p>Here is how you might run one of the benchmarks on a Linux box, using
mpirun to launch a parallel job:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> src
make g++
cp spa_g++ ../bench
<span class="nb">cd</span> ../bench
mpirun -np <span class="m">4</span> spa_g++ &lt; in.free
</pre></div>
</div>
<p>or:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake -DCMAKE_CXX_COMPILER<span class="o">=</span>g++ -DSPARTA_MACHINE<span class="o">=</span>g++ /path/to/sparta/cmake
cp src/spa_g++ /path/to/bench
<span class="nb">cd</span> /path/to/bench
mpirun -np <span class="m">4</span> spa_g++ &lt; in.free
</pre></div>
</div>
<p>See <a class="reference external" href="http://sparta.sandia.gov/bench.html">this page</a> for timings for
this and the other benchmarks on various platforms.</p>
<p>The screen output from SPARTA is described in the next section. As it
runs, SPARTA also writes a log.sparta file with the same information.</p>
<p>Note that this sequence of commands copies the SPARTA executable
(spa_g++) to the directory with the input files. This may not be
necessary, but some versions of MPI reset the working directory to where
the executable is, rather than leave it as the directory where you
launch mpirun from (if you launch spa_g++ on its own and not under
mpirun). If that happens, SPARTA will look for additional input files
and write its output files to the executable directory, rather than your
working directory, which is probably not what you want.</p>
<p>If SPARTA encounters errors in the input script or while running a
simulation it will print an ERROR message and stop or a WARNING message
and continue. See <a class="reference internal" href="Section_errors.html#errors"><span class="std std-ref">Errors</span></a> for a discussion of the various kinds of errors SPARTA can or can’t detect, a list of all ERROR and WARNING messages, and what to do about them.</p>
<p>SPARTA can run a problem on any number of processors, including a single
processor. The random numbers used by each processor will be different
so you should only expect statistical consistency if the same problem is
run on different numbers of processors.</p>
<p>SPARTA can run as large a problem as will fit in the physical memory of
one or more processors. If you run out of memory, you must run on more
processors or setup a smaller problem.</p>
<hr class="docutils" />
</div>
<div class="section" id="command-line-options">
<span id="start-command-line-options"></span><h2><a class="toc-backref" href="#id19">2.6. Command-line options</a><a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<p>At run time, SPARTA recognizes several optional command-line switches
which may be used in any order. Either the full word or a one-or-two
letter abbreviation can be used:</p>
<ul class="simple">
<li><p>-e or -echo</p></li>
<li><p>-i or -in</p></li>
<li><p>-h or -help</p></li>
<li><p>-k or -kokkos</p></li>
<li><p>-l or -log</p></li>
<li><p>-p or -partition</p></li>
<li><p>-pk or -package</p></li>
<li><p>-pl or -plog</p></li>
<li><p>-ps or -pscreen</p></li>
<li><p>-sc or -screen</p></li>
<li><p>-sf or -suffix</p></li>
<li><p>-v or -var</p></li>
</ul>
<p>For example, spa_g++ might be launched as follows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpirun -np <span class="m">16</span> spa_g++ -v f tmp.out -l my.log -sc none &lt; in.sphere
mpirun -np <span class="m">16</span> spa_g++ -var f tmp.out -log my.log -screen none &lt; in.sphere
</pre></div>
</div>
<p>Here are the details on the options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-echo style
</pre></div>
</div>
<p>Set the style of command echoing. The style can be <em>none</em> or <em>screen</em> or
<em>log</em> or <em>both</em>. Depending on the style, each command read from the
input script will be echoed to the screen and/or logfile. This can be
useful to figure out which line of your script is causing an input
error. The default value is <em>log</em>. The echo style can also be set by
using the <a class="reference internal" href="echo.html#command-echo"><span class="std std-ref">echo command</span></a> in the input script itself.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-in file
</pre></div>
</div>
<p>Specify a file to use as an input script. This is an optional switch
when running SPARTA in one-partition mode. If it is not specified,
SPARTA reads its input script from stdin - e.g. <cite>spa_g++ &lt; in.run</cite>. This
is a required switch when running SPARTA in multi-partition mode, since
multiple processors cannot all read from stdin.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-help
</pre></div>
</div>
<p>Print a list of options compiled into this executable for each SPARTA
style (fix, compute, collide, etc). SPARTA will print the info and
immediately exit if this switch is used.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-kokkos on/off keyword/value ...
</pre></div>
</div>
<p>Explicitly enable or disable KOKKOS support, as provided by the KOKKOS
package. Even if SPARTA is built with this package, as described above
in <a class="reference internal" href="#start-optional-packages"><span class="std std-ref">Making SPARTA with optional packages</span></a>, this switch must be set to enable running
with the KOKKOS-enabled styles the package provides. If the switch is
not set (the default), SPARTA will operate as if the KOKKOS package were
not installed; i.e. you can run standard SPARTA for testing or
benchmarking purposes.</p>
<p>Additional optional keyword/value pairs can be specified which determine
how Kokkos will use the underlying hardware on your platform. These
settings apply to each MPI task you launch via the “mpirun” or “mpiexec”
command. You may choose to run one or more MPI tasks per physical node.
Note that if you are running on a desktop machine, you typically have
one physical node. On a cluster or supercomputer there may be dozens or
1000s of physical nodes.</p>
<p>Either the full word or an abbreviation can be used for the keywords.
Note that the keywords do not use a leading minus sign. I.e. the keyword
is “t”, not “-t”. Also note that each of the keywords has a default
setting. Example of when to use these options and what settings to use
on different platforms is given in <a class="reference internal" href="Section_accelerate.html#accelerate"><span class="std std-ref">Accelerating SPARTA performance</span></a>.</p>
<ul class="simple">
<li><p>d or device</p></li>
<li><p>g or gpus</p></li>
<li><p>t or threads</p></li>
<li><p>n or numa</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>device Nd
</pre></div>
</div>
<p>This option is only relevant if you built SPARTA with
KOKKOS_DEVICES=Cuda, you have more than one GPU per node, and if you are
running with only one MPI task per node. The Nd setting is the ID of the
GPU on the node to run on. By default Nd = 0. If you have multiple GPUs
per node, they have consecutive IDs numbered as 0,1,2,etc. This setting
allows you to launch multiple independent jobs on the node, each with a
single MPI task per node, and assign each job to run on a different GPU.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gpus Ng Ns
</pre></div>
</div>
<p>This option is only relevant if you built SPARTA with
KOKKOS_DEVICES=Cuda, you have more than one GPU per node, and you are
running with multiple MPI tasks per node. The Ng setting is how many
GPUs you will use per node. The Ns setting is optional. If set, it is
the ID of a GPU to skip when assigning MPI tasks to GPUs. This may be
useful if your desktop system reserves one GPU to drive the screen and
the rest are intended for computational work like running SPARTA. By
default Ng = 1 and Ns is not set.</p>
<p>Depending on which flavor of MPI you are running, SPARTA will look for
one of these 4 environment variables</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>SLURM_LOCALID <span class="o">(</span>various MPI variants compiled with SLURM support<span class="o">)</span>
MPT_LRANK <span class="o">(</span>HPE MPI<span class="o">)</span>
MV2_COMM_WORLD_LOCAL_RANK <span class="o">(</span>Mvapich<span class="o">)</span>
OMPI_COMM_WORLD_LOCAL_RANK <span class="o">(</span>OpenMPI<span class="o">)</span>
</pre></div>
</div>
<p>which are initialized by the “srun”, “mpirun” or “mpiexec” commands. The
environment variable setting for each MPI rank is used to assign a
unique GPU ID to the MPI task.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>threads Nt
</pre></div>
</div>
<p>This option assigns Nt number of threads to each MPI task for performing
work when Kokkos is executing in OpenMP or pthreads mode. The default is
Nt = 1, which essentially runs in MPI-only mode. If there are Np MPI
tasks per physical node, you generally want Np*Nt = the number of
physical cores per node, to use your available hardware optimally. If
SPARTA is compiled with KOKKOS_DEVICES=Cuda, this setting has no effect.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-log file
</pre></div>
</div>
<p>Specify a log file for SPARTA to write status information to. In
one-partition mode, if the switch is not used, SPARTA writes to the file
log.sparta. If this switch is used, SPARTA writes to the specified file.
In multi-partition mode, if the switch is not used, a log.sparta file is
created with hi-level status information. Each partition also writes to
a log.sparta.N file where N is the partition ID. If the switch is
specified in multi-partition mode, the hi-level logfile is named “file”
and each partition also logs information to a file.N. For both
one-partition and multi-partition mode, if the specified file is “none”,
then no log files are created. Using a <a class="reference internal" href="log.html#command-log"><span class="std std-ref">log command</span></a> in the
input script will override this setting. Option -plog will override the
name of the partition log files file.N.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-partition 8x2 <span class="m">4</span> <span class="m">5</span> ...
</pre></div>
</div>
<p>Invoke SPARTA in multi-partition mode. When SPARTA is run on P
processors and this switch is not used, SPARTA runs in one partition,
i.e. all P processors run a single simulation. If this switch is used,
the P processors are split into separate partitions and each partition
runs its own simulation. The arguments to the switch specify the number
of processors in each partition. Arguments of the form MxN mean M
partitions, each with N processors. Arguments of the form N mean a
single partition with N processors. The sum of processors in all
partitions must equal P. Thus the command “-partition 8x2 4 5” has 10
partitions and runs on a total of 25 processors. Note that with MPI
installed on a machine (e.g. your desktop), you can run on more
(virtual) processors than you have physical processors.</p>
<p>To run multiple independent simulations from one input script, using
multiple partitions, see  <a class="reference internal" href="Section_howto.html#howto-multiple-simulations"><span class="std std-ref">Running multiple simulations from one input script</span></a> of
the manual. World- and universe-style variables are useful in this
context.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-package style args ....
</pre></div>
</div>
<p>Invoke the <a class="reference internal" href="package.html#command-package"><span class="std std-ref">package command</span></a> with style and args. The syntax is the same as if the command appeared at the top of the input script. For example “-package kokkos on gpus 2” or “-pk kokkos g 2” is the same as <a class="reference internal" href="package.html#command-package"><span class="std std-ref">package kokkos g 2</span></a> in the input script.  The possible styles and args are documented on the <a class="reference internal" href="package.html#command-package"><span class="std std-ref">package command</span></a> doc page. This switch can be used multiple times.</p>
<p>Along with the <a class="reference internal" href="#start-command-line-options"><span class="std std-ref">-suffix command-line switch</span></a>,
this is a convenient mechanism for invoking the KOKKOS accelerator package and its options without having to edit an input script.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-plog file
</pre></div>
</div>
<p>Specify the base name for the partition log files, so partition N writes
log information to file.N. If file is none, then no partition log files
are created. This overrides the filename specified in the <code class="docutils literal notranslate"><span class="pre">-log</span></code>
command-line option. This option is useful when working with large
numbers of partitions, allowing the partition log files to be suppressed
(-plog none) or placed in a sub-directory (-plog
replica_files/log.sparta) If this option is not used the log file for
partition N is log.sparta.N or whatever is specified by the -log
command-line option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-pscreen file
</pre></div>
</div>
<p>Specify the base name for the partition screen file, so partition N
writes screen information to file.N. If file is none, then no partition
screen files are created. This overrides the filename specified in the
<code class="docutils literal notranslate"><span class="pre">-screen</span></code> command-line option. This option is useful when working with
large numbers of partitions, allowing the partition screen files to be
suppressed (<code class="docutils literal notranslate"><span class="pre">-pscreen</span> <span class="pre">none</span></code>) or placed in a sub-directory (<code class="docutils literal notranslate"><span class="pre">-pscreen</span>
<span class="pre">replica_files/screen</span></code>). If this option is not used the screen file for
partition N is screen.N or whatever is specified by the -screen
command-line option.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-screen file
</pre></div>
</div>
<p>Specify a file for SPARTA to write its screen information to. In
one-partition mode, if the switch is not used, SPARTA writes to the
screen. If this switch is used, SPARTA writes to the specified file
instead and you will see no screen output. In multi-partition mode, if
the switch is not used, hi-level status information is written to the
screen. Each partition also writes to a screen.N file where N is the
partition ID. If the switch is specified in multi-partition mode, the
hi-level screen dump is named “file” and each partition also writes
screen information to a file.N. For both one-partition and
multi-partition mode, if the specified file is “none”, then no screen
output is performed. Option -pscreen will override the name of the
partition screen files file.N.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-suffix style args
</pre></div>
</div>
<p>Use variants of various styles if they exist. The specified style can be
<em>kk</em>. This refers to optional KOKKOS package that SPARTA can be built
with, as described above in <a class="reference internal" href="#start-optional-packages"><span class="std std-ref">Making SPARTA with optional packages</span></a>.</p>
<p>Along with the “-package” command-line switch, this is a convenient
mechanism for invoking the KOKKOS accelerator package and its options
without having to edit an input script.</p>
<p>As an example, the KOKKOS package provides a <a class="reference internal" href="compute_temp.html#command-compute-temp"><span class="std std-ref">compute temp command</span></a> variant,
with style name temp/kk.
A variant style can be specified explicitly in your input script, e.g. compute temp/kk.
If the suffix command is used with the appropriate style, you
do not need to modify your input script.
The specified suffix (kk) is automatically appended whenever your input script command creates a new <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix command</span></a>, <a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">compute command</span></a>, etc. If the variant version does not exist, the standard version is created.</p>
<p>For the KOKKOS package, using this command-line switch also invokes the
default KOKKOS settings, as if the command “package kokkos” were used at
the top of your input script. These settings can be changed by using the
“-package kokkos” command-line switch or the <a class="reference internal" href="package.html#command-package"><span class="std std-ref">package command</span></a> in your script.</p>
<p>The <a class="reference internal" href="suffix.html#command-suffix"><span class="std std-ref">suffix command</span></a> can also be used within an input
script to set a suffix, or to turn off or back on any suffix setting
made via the command line.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-var name value1 value2 ...
</pre></div>
</div>
<p>Specify a variable that will be defined for substitution purposes when
the input script is read. “Name” is the variable name which can be a
single character (referenced as $x in the input script) or a full string
(referenced as ${abc}). An <a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">index-style variable</span></a> will
be created and populated with the subsequent values, e.g. a set of
filenames. Using this command-line option is equivalent to putting the
line “variable name index value1 value2 …” at the beginning of the
input script. Defining an index variable as a command-line argument
overrides any setting for the same index variable in the input script,
since index variables cannot be re-defined. See the
<a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">variable command</span></a> for more info on defining index and
other kinds of variables and Section <a class="reference internal" href="Section_commands.html#commands-parsing-rules"><span class="std std-ref">Parsing rules</span></a> for more info on using variables in input scripts.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Currently, the command-line parser looks for arguments that start with “-” to indicate new switches. Thus you cannot specify multiple variable values if any of they start with a “-“, e.g. a negative numeric value. It is OK if the first value1 starts with a “-“, since it is automatically skipped.</p>
</div>
</div>
<div class="section" id="sparta-screen-output">
<span id="start-screen"></span><h2><a class="toc-backref" href="#id20">2.7. SPARTA screen output</a><a class="headerlink" href="#sparta-screen-output" title="Permalink to this headline">¶</a></h2>
<p>As SPARTA reads an input script, it prints information to both the
screen and a log file about significant actions it takes to setup a
simulation. When the simulation is ready to begin, SPARTA performs
various initializations and prints the amount of memory (in MBytes per
processor) that the simulation requires. It also prints details of the
initial state of the system. During the run itself, statistical
information is printed periodically, every few timesteps. When the run
concludes, SPARTA prints the final state and a total run time for the
simulation. It then appends statistics about the CPU time and size of
information stored for the simulation. An example set of statistics is
shown here:</p>
<ul>
<li><p>The first line gives the total CPU run time for the simulation, in seconds.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Loop <span class="nb">time</span> of <span class="m">0</span>.639973 on <span class="m">4</span> procs <span class="k">for</span> <span class="m">1000</span> steps with <span class="m">45792</span> particles
</pre></div>
</div>
</li>
<li><p>The next section gives a breakdown of the CPU timing (in seconds) in 7 categories. The first four are timings for particles moves, which includes interaction with surface elements, then particle collisions, then sorting of particles (required to perform collisions), and communication of particles between processors. The Modify section is time for operations invoked by fixes and computes. The Output section is for dump command and statistical output. The Other category is typically for load-imbalance, as some MPI tasks wait for others MPI tasks to complete. In each category the min,ave,max time across processors is shown, as well as a variation, and the percentage of total time.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>MPI task timing breakdown:
Section <span class="p">|</span>  min <span class="nb">time</span>  <span class="p">|</span>  avg <span class="nb">time</span>  <span class="p">|</span>  max <span class="nb">time</span>  <span class="p">|</span>%varavg<span class="p">|</span> %total
---------------------------------------------------------------
Move    <span class="p">|</span> <span class="m">0</span>.10948    <span class="p">|</span> <span class="m">0</span>.26191    <span class="p">|</span> <span class="m">0</span>.42049    <span class="p">|</span>  <span class="m">27</span>.6 <span class="p">|</span> <span class="m">40</span>.92
Coll    <span class="p">|</span> <span class="m">0</span>.013711   <span class="p">|</span> <span class="m">0</span>.041659   <span class="p">|</span> <span class="m">0</span>.070985   <span class="p">|</span>  <span class="m">13</span>.5 <span class="p">|</span>  <span class="m">6</span>.51
Sort    <span class="p">|</span> <span class="m">0</span>.01733    <span class="p">|</span> <span class="m">0</span>.040286   <span class="p">|</span> <span class="m">0</span>.063573   <span class="p">|</span>  <span class="m">10</span>.6 <span class="p">|</span>  <span class="m">6</span>.29
Comm    <span class="p">|</span> <span class="m">0</span>.02276    <span class="p">|</span> <span class="m">0</span>.023555   <span class="p">|</span> <span class="m">0</span>.02493    <span class="p">|</span>   <span class="m">0</span>.6 <span class="p">|</span>  <span class="m">3</span>.68
Modify  <span class="p">|</span> <span class="m">0</span>.00018167 <span class="p">|</span> <span class="m">0</span>.024758   <span class="p">|</span> <span class="m">0</span>.051345   <span class="p">|</span>  <span class="m">15</span>.6 <span class="p">|</span>  <span class="m">3</span>.87
Output  <span class="p">|</span> <span class="m">0</span>.0002172  <span class="p">|</span> <span class="m">0</span>.0007354  <span class="p">|</span> <span class="m">0</span>.0012152  <span class="p">|</span>   <span class="m">0</span>.0 <span class="p">|</span>  <span class="m">0</span>.11
Other   <span class="p">|</span>            <span class="p">|</span> <span class="m">0</span>.2471     <span class="p">|</span>            <span class="p">|</span>       <span class="p">|</span> <span class="m">38</span>.61
</pre></div>
</div>
</li>
<li><p>The next section gives some statistics about the run. These are total counts of particle moves, grid cells touched by particles, the number of particles communicated between processors, collisions of particles with the global boundary and with surface elements (none in this problem), as well as collision and reaction statistics.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Particle <span class="nv">moves</span>    <span class="o">=</span> <span class="m">38096354</span> <span class="o">(</span><span class="m">38</span>.1M<span class="o">)</span>
Cells <span class="nv">touched</span>     <span class="o">=</span> <span class="m">43236871</span> <span class="o">(</span><span class="m">43</span>.2M<span class="o">)</span>
Particle <span class="nv">comms</span>    <span class="o">=</span> <span class="m">146623</span> <span class="o">(</span><span class="m">0</span>.147M<span class="o">)</span>
Boundary <span class="nv">collides</span> <span class="o">=</span> <span class="m">182782</span> <span class="o">(</span><span class="m">0</span>.183M<span class="o">)</span>
Boundary <span class="nv">exits</span>    <span class="o">=</span> <span class="m">181792</span> <span class="o">(</span><span class="m">0</span>.182M<span class="o">)</span>
SurfColl <span class="nv">checks</span>   <span class="o">=</span> <span class="m">7670863</span> <span class="o">(</span><span class="m">7</span>.67M<span class="o">)</span>
SurfColl <span class="nv">occurs</span>   <span class="o">=</span> <span class="m">177740</span> <span class="o">(</span><span class="m">0</span>.178M<span class="o">)</span>
Surf <span class="nv">reactions</span>    <span class="o">=</span> <span class="m">124169</span> <span class="o">(</span><span class="m">0</span>.124M<span class="o">)</span>
Collide <span class="nv">attempts</span>  <span class="o">=</span> <span class="m">1232</span> <span class="o">(</span>1K<span class="o">)</span>
Collide <span class="nv">occurs</span>    <span class="o">=</span> <span class="m">553</span> <span class="o">(</span><span class="m">0</span>.553K<span class="o">)</span>
Gas <span class="nv">reactions</span>     <span class="o">=</span> <span class="m">23</span> <span class="o">(</span><span class="m">0</span>.023K<span class="o">)</span>
Particles <span class="nv">stuck</span>   <span class="o">=</span> <span class="m">0</span>
</pre></div>
</div>
</li>
<li><p>The next section gives additional statistics, normalized by timestep or processor count.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Particle-moves/CPUsec/proc: <span class="m">1</span>.4882e+07
Particle-moves/step: <span class="m">38096</span>.4
Cell-touches/particle/step: <span class="m">1</span>.13493
Particle comm iterations/step: <span class="m">1</span>.999
Particle fraction communicated: <span class="m">0</span>.00384874
Particle fraction colliding with boundary: <span class="m">0</span>.00479789
Particle fraction exiting boundary: <span class="m">0</span>.0047719
Surface-checks/particle/step: <span class="m">0</span>.201354
Surface-collisions/particle/step: <span class="m">0</span>.00466554
Surface-reactions/particle/step: <span class="m">0</span>.00325934
Collision-attempts/particle/step: <span class="m">1</span>.232
Collisions/particle/step: <span class="m">0</span>.553
Gas-reactions/particle/step: <span class="m">0</span>.023
</pre></div>
</div>
</li>
<li><p>The next 2 sections are optional. The “Gas reaction tallies” section is only output if the <a class="reference internal" href="react.html#command-react"><span class="std std-ref">react command</span></a> is used. For each reaction with a non-zero tally, the number of those reactions that occurred during the run is printed. The “Surface reaction tallies” section is only output if the <a class="reference internal" href="surf_react.html#command-surf-react"><span class="std std-ref">surf_react command</span></a> was used one or more times, to assign reaction models to individual surface elements or the box boundaries. For each of the commands, and each of its reactions with a non-zero tally, the number of those reactions that occurred during the run is printed. Note that this is effectively a summation over all the surface elements and/or box boundaries the <a class="reference internal" href="surf_react.html#command-surf-react"><span class="std std-ref">surf_react command</span></a> was used to assign a reaction model to.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Gas reaction tallies: style tce <span class="c1">#-of-reactions 45 \</span>
reaction O2 + N --&gt; O + O + N: <span class="m">10</span> <span class="se">\</span>
reaction O2 + O --&gt; O + O + O: <span class="m">5</span> <span class="se">\</span>
reaction N2 + O --&gt; N + N + O: <span class="m">8</span>

Surface reaction tallies: id <span class="m">1</span> style global <span class="c1">#-of-reactions 2 \</span>
reaction all: <span class="m">124025</span> <span class="se">\</span>
reaction delete: <span class="m">53525</span> <span class="se">\</span>
reaction create: <span class="m">70500</span>
</pre></div>
</div>
</li>
<li><p>The last section is a histogramming across processors of various per-processor statistics: particle count, owned grid cells, processor, ghost grid cells which are copies of cells owned by other processors, and empty cells which are ghost cells without surface information (only used to pass particles to neighboring processors).
The ave value is the average across all processors. The max and min values are for any processor. The 10-bin histogram shows the distribution of the value across processors. The total number of histogram counts is equal to the number of processors.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Particles: <span class="m">11448</span> ave <span class="m">17655</span> max <span class="m">5306</span> min
Histogram: <span class="m">2</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">2</span>
Cells:     <span class="m">100</span> ave <span class="m">100</span> max <span class="m">100</span> min
Histogram: <span class="m">4</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
GhostCell: <span class="m">21</span> ave <span class="m">21</span> max <span class="m">21</span> min
Histogram: <span class="m">4</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
EmptyCell: <span class="m">21</span> ave <span class="m">21</span> max <span class="m">21</span> min
Histogram: <span class="m">4</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
Surfs:     <span class="m">50</span> ave <span class="m">50</span> max <span class="m">50</span> min
Histogram: <span class="m">4</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
GhostSurf: <span class="m">0</span> ave <span class="m">0</span> max <span class="m">0</span> min
Histogram: <span class="m">4</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Section_commands.html" class="btn btn-neutral float-right" title="3. Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Section_intro.html" class="btn btn-neutral float-left" title="1. Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>