

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>14.21. compute lambda/grid command &mdash; SPARTA 7 May 2020 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/rtd_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="14.23. compute pflux/grid command" href="compute_pflux_grid.html" />
    <link rel="prev" title="14.19. compute ke/particle command" href="compute_ke_particle.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SPARTA
          

          
          </a>

          
            
            
              <div class="version">
                7 May 2020
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Section_intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_start.html">2. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_commands.html">3. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_packages.html">4. Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_accelerate.html">5. Accelerating SPARTA performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_howto.html">6. How-to discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_example.html">7. Example problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_perf.html">8. Performance &amp; scalability</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_tools.html">9. Additional tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_modify.html">10. Modifying &amp; extending SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_python.html">11. Python interface to SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_errors.html">12. Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_history.html">13. Future and history</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="commands.html">14. List of Commands</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="adapt_grid.html">14.1. adapt_grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="balance_grid.html">14.2. balance_grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="bound_modify.html">14.3. bound_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="boundary.html">14.4. boundary command</a></li>
<li class="toctree-l2"><a class="reference internal" href="clear.html">14.5. clear command</a></li>
<li class="toctree-l2"><a class="reference internal" href="collide.html">14.6. collide command</a></li>
<li class="toctree-l2"><a class="reference internal" href="collide_modify.html">14.7. collide_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute.html">14.8. compute command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_boundary.html">14.9. compute boundary command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_count.html">14.10. compute count command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_count.html#compute-count-kk-command">14.11. compute count/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_distsurf_grid.html">14.12. compute distsurf/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_eflux_grid.html">14.13. compute eflux/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_eflux_grid.html#compute-eflux-grid-kk-command">14.14. compute eflux/grid/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_fft_grid.html">14.15. compute fft/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_grid.html">14.16. compute grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_grid.html#compute-grid-kk-command">14.17. compute grid/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_isurf_grid.html">14.18. compute isurf/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_ke_particle.html">14.19. compute ke/particle command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_ke_particle.html#compute-ke-particle-kk-command">14.20. compute ke/particle/kk command</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">14.21. compute lambda/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compute-lambda-grid-kk-command">14.22. compute lambda/grid/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_pflux_grid.html">14.23. compute pflux/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_pflux_grid.html#compute-pflux-grid-kk-command">14.24. compute pflux/grid/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_property_grid.html">14.25. compute property/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_react_boundary.html">14.26. compute react/boundary command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_react_isurf_grid.html">14.27. compute react/isurf/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_react_surf.html">14.28. compute react/surf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_reduce.html">14.29. compute reduce command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_sonine_grid.html">14.30. compute sonine/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_sonine_grid.html#compute-sonine-grid-kk-command">14.31. compute sonine/grid/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_surf.html">14.32. compute surf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_surf.html#compute-surf-kk-command">14.33. compute surf/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_temp.html">14.34. compute temp command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_temp.html#compute-temp-kk-command">14.35. compute temp/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_thermal_grid.html">14.36. compute thermal/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_thermal_grid.html#compute-thermal-grid-kk-command">14.37. compute thermal/grid/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute_tvib_grid.html">14.38. compute tvib/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_box.html">14.39. create_box command</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_grid.html">14.40. create_grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_particles.html">14.41. create_particles command</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_particles.html#create-particles-kk-command">14.42. create_particles/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dimension.html">14.43. dimension command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump.html">14.44. dump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_image.html">14.45. dump image command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_image.html#dump-movie-command">14.46. dump movie command</a></li>
<li class="toctree-l2"><a class="reference internal" href="dump_modify.html">14.47. dump_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="echo.html">14.48. echo command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix.html">14.49. fix command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_ablate.html">14.50. fix ablate command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_adapt.html">14.51. fix adapt command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_adapt.html#fix-adapt-kk-command">14.52. fix adapt/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_ambipolar.html">14.53. fix ambipolar command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_ave_grid.html">14.54. fix ave/grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_ave_grid.html#fix-ave-grid-kk-command">14.55. fix ave/grid/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_ave_surf.html">14.56. fix ave/surf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_ave_time.html">14.57. fix ave/time command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_balance.html">14.58. fix balance command - fix balance/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_emit_face.html">14.59. fix emit/face command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_emit_face.html#fix-emit-face-kk-command">14.60. fix emit/face/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_emit_face_file.html">14.61. fix emit/face/file command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_emit_surf.html">14.62. fix emit/surf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_grid_check.html">14.63. fix grid/check command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_grid_check.html#fix-grid-check-kk-command">14.64. fix grid/check/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_move_surf.html">14.65. fix move/surf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_move_surf.html#fix-move-surf-kk-command">14.66. fix move/surf/kk command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_print.html">14.67. fix print command</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_vibmode.html">14.68. fix vibmode command</a></li>
<li class="toctree-l2"><a class="reference internal" href="global.html">14.69. global command</a></li>
<li class="toctree-l2"><a class="reference internal" href="group.html">14.70. group command</a></li>
<li class="toctree-l2"><a class="reference internal" href="if.html">14.71. if command</a></li>
<li class="toctree-l2"><a class="reference internal" href="include.html">14.72. include command</a></li>
<li class="toctree-l2"><a class="reference internal" href="jump.html">14.73. jump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="label.html">14.74. label command</a></li>
<li class="toctree-l2"><a class="reference internal" href="log.html">14.75. log command</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixture.html">14.76. mixture command</a></li>
<li class="toctree-l2"><a class="reference internal" href="move_surf.html">14.77. move_surf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="next.html">14.78. next command</a></li>
<li class="toctree-l2"><a class="reference internal" href="package.html">14.79. package command</a></li>
<li class="toctree-l2"><a class="reference internal" href="partition.html">14.80. partition command</a></li>
<li class="toctree-l2"><a class="reference internal" href="print.html">14.81. print command</a></li>
<li class="toctree-l2"><a class="reference internal" href="quit.html">14.82. quit command</a></li>
<li class="toctree-l2"><a class="reference internal" href="react.html">14.83. react command</a></li>
<li class="toctree-l2"><a class="reference internal" href="react_modify.html">14.84. react_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="read_grid.html">14.85. read_grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="read_isurf.html">14.86. read_isurf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="read_particles.html">14.87. read_particles command</a></li>
<li class="toctree-l2"><a class="reference internal" href="read_restart.html">14.88. read_restart command</a></li>
<li class="toctree-l2"><a class="reference internal" href="read_surf.html">14.89. read_surf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="region.html">14.90. region command</a></li>
<li class="toctree-l2"><a class="reference internal" href="remove_surf.html">14.91. remove_surf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset_timestep.html">14.92. reset_timestep command</a></li>
<li class="toctree-l2"><a class="reference internal" href="restart.html">14.93. restart command</a></li>
<li class="toctree-l2"><a class="reference internal" href="run.html">14.94. run command</a></li>
<li class="toctree-l2"><a class="reference internal" href="scale_particles.html">14.95. scale_particles command</a></li>
<li class="toctree-l2"><a class="reference internal" href="seed.html">14.96. seed command</a></li>
<li class="toctree-l2"><a class="reference internal" href="shell.html">14.97. shell command</a></li>
<li class="toctree-l2"><a class="reference internal" href="species.html">14.98. species command</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats.html">14.99. stats command</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats_modify.html">14.100. stats_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="stats_style.html">14.101. stats_style command</a></li>
<li class="toctree-l2"><a class="reference internal" href="suffix.html">14.102. suffix command</a></li>
<li class="toctree-l2"><a class="reference internal" href="surf_collide.html">14.103. surf_collide command</a></li>
<li class="toctree-l2"><a class="reference internal" href="surf_modify.html">14.104. surf_modify command</a></li>
<li class="toctree-l2"><a class="reference internal" href="surf_react.html">14.105. surf_react command</a></li>
<li class="toctree-l2"><a class="reference internal" href="timestep.html">14.106. timestep command</a></li>
<li class="toctree-l2"><a class="reference internal" href="uncompute.html">14.107. uncompute command</a></li>
<li class="toctree-l2"><a class="reference internal" href="undump.html">14.108. undump command</a></li>
<li class="toctree-l2"><a class="reference internal" href="unfix.html">14.109. unfix command</a></li>
<li class="toctree-l2"><a class="reference internal" href="units.html">14.110. units command</a></li>
<li class="toctree-l2"><a class="reference internal" href="variable.html">14.111. variable command</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_grid.html">14.112. write_grid command</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_isurf.html">14.113. write_isurf command</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_restart.html">14.114. write_restart command</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_surf.html">14.115. write_surf command</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SPARTA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="commands.html">14. List of Commands</a> &raquo;</li>
        
      <li>14.21. compute lambda/grid command</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/compute_lambda_grid.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="index-0"></span><div class="section" id="compute-lambda-grid-command">
<span id="command-compute-lambda-grid"></span><span id="index-1"></span><h1>14.21. compute lambda/grid command<a class="headerlink" href="#compute-lambda-grid-command" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="compute-lambda-grid-kk-command">
<h1>14.22. compute lambda/grid/kk command<a class="headerlink" href="#compute-lambda-grid-kk-command" title="Permalink to this headline">¶</a></h1>
<p><strong>Syntax:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compute</span> <span class="n">ID</span> <span class="k">lambda</span><span class="o">/</span><span class="n">grid</span> <span class="n">nrho</span> <span class="n">temp</span> <span class="n">species</span> <span class="n">extra</span>
</pre></div>
</div>
<ul>
<li><p>ID is documented in <a class="reference external" href="compute.html">compute</a> command</p></li>
<li><p>lambda/grid = style name of this compute command</p></li>
<li><p>nrho = compute or fix column for number density, prefaced by <code class="docutils literal notranslate"><span class="pre">c_</span></code> or
<code class="docutils literal notranslate"><span class="pre">f_</span></code></p></li>
<li><p>temp = NULL or compute or fix column for temperature, prefaced by
<code class="docutils literal notranslate"><span class="pre">c_</span></code> or <code class="docutils literal notranslate"><span class="pre">f_</span></code></p></li>
<li><p>species = species name used for reference properties</p></li>
<li><p>extra = <em>kall</em> or <em>kx</em> or <em>ky</em> or <em>kz</em> (optional)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">kall</span> <span class="o">=</span> <span class="n">also</span> <span class="n">calculate</span> <span class="n">Knudsen</span> <span class="n">number</span> <span class="n">based</span> <span class="n">on</span> <span class="n">cell</span> <span class="n">size</span> <span class="ow">in</span> <span class="nb">all</span> <span class="n">dimensions</span>
<span class="n">kx</span> <span class="o">=</span> <span class="n">also</span> <span class="n">calculate</span> <span class="n">Knudsen</span> <span class="n">number</span> <span class="n">based</span> <span class="n">on</span> <span class="n">cell</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">x</span> <span class="n">dimension</span>
<span class="n">ky</span> <span class="o">=</span> <span class="n">also</span> <span class="n">calculate</span> <span class="n">Knudsen</span> <span class="n">number</span> <span class="n">based</span> <span class="n">on</span> <span class="n">cell</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">y</span> <span class="n">dimension</span>
<span class="n">kz</span> <span class="o">=</span> <span class="n">also</span> <span class="n">calculate</span> <span class="n">Knudsen</span> <span class="n">number</span> <span class="n">based</span> <span class="n">on</span> <span class="n">cell</span> <span class="n">size</span> <span class="ow">in</span> <span class="n">z</span> <span class="n">dimension</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compute</span> <span class="mi">1</span> <span class="k">lambda</span><span class="o">/</span><span class="n">grid</span> <span class="n">c_GR</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">NULL</span> <span class="n">Ar</span>
<span class="n">compute</span> <span class="mi">1</span> <span class="k">lambda</span><span class="o">/</span><span class="n">grid</span> <span class="n">f_ave</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="n">f_ave</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">N2</span> <span class="n">kall</span>
</pre></div>
</div>
<p>These commands will dump time averages for the mean free path for each
grid cell to a dump file every 1000 steps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compute</span> <span class="mi">1</span> <span class="n">grid</span> <span class="n">species</span> <span class="n">nrho</span> <span class="n">temp</span>
<span class="n">fix</span> <span class="mi">1</span> <span class="n">ave</span><span class="o">/</span><span class="n">grid</span> <span class="mi">10</span> <span class="mi">100</span> <span class="mi">1000</span> <span class="n">c_1</span><span class="p">[</span><span class="o">*</span><span class="p">]</span>
<span class="n">compute</span> <span class="mi">2</span> <span class="k">lambda</span><span class="o">/</span><span class="n">grid</span> <span class="n">f_1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">f_1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="n">Ar</span>
<span class="n">dump</span> <span class="mi">1</span> <span class="n">grid</span> <span class="nb">all</span> <span class="mi">1000</span> <span class="n">tmp</span><span class="o">.</span><span class="n">grid</span> <span class="nb">id</span> <span class="n">c_2</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Define a computation that calculates the mean free path (lambda) between
molecular collisions for each grid cell, based on the particles in that
cell. Optionally, a Knudsen number for each cell can also be calculated,
which is the mean free path divided by the cell size. These quantities
can be useful for estimating the optimal grid cell size when adapting
the grid, e.g. via the <a class="reference external" href="adapt_grid.html">adapt_grid</a> or <a class="reference external" href="fix_adapt_grid.html">fix
adapt/grid</a> commands.</p>
<p>Unlike other computes that calculate per grid cell values, this compute
does not take a “group-ID” for a grid cell group as an argument, nor a
particle <a class="reference external" href="mixture.html">mixture</a> ID as an argument. This is because
it uses the number density and temperature calculated by other computes
or fixes as input, and those computes or fixes use grid group IDs or
mixture IDs as part of their computations.</p>
<p>The results of this compute can be used by different commands in
different ways. For example, the values can be output by the <a class="reference external" href="dump.html">dump
grid</a> command.</p>
<hr class="docutils" />
<p>The formula used to calculate the mean free path (lambda) is given in
<a class="reference internal" href="surf_collide.html#bird94" id="id1"><span>[Bird94]</span></a> as equation 4.65:</p>
<p><img alt="image0" src="_images/lambda.jpg" /></p>
<p>This is an approximate mean free path for a multi-species mixture,
suitable for estimating optimal grid cell sizes as explained above. It
is a simplied version of formulas 4.76 and 4.77 from the same reference.</p>
<p>Dref and Tref and omega are collision properties for a reference species
in the flow. The reference species is specified by the <em>species</em>
argument. It must be a species defined by the <a class="reference external" href="species.html">species</a>
command and listed in the file of per-species collision properties read
in by the <a class="reference external" href="collide.html">collide</a> command.</p>
<p>Specifically, Dref is the diameter of molecules of the species, Tref is
the reference temperature, and omega is the viscosity
temperature-dependence for the species.</p>
<p>In the formula above, <em>n</em> is the number density and <em>T</em> is the thermal
temperature of particles in a grid cell. This compute does not calculate
these quantities itself; instead it uses another compute or fix to
perform the calculation. This is done by specifying the <em>nrho</em> and
<em>temp</em> arguments like this:</p>
<ul class="simple">
<li><p>c_ID = compute with ID that calculates nrho/temp as a vector output</p></li>
<li><p>c_ID[m] = compute with ID that calculates nrho/temp as its Mth column
of array output</p></li>
<li><p>f_ID[m] = fix with ID that calculates a time-averaged nrho/temp as a
vector output</p></li>
<li><p>f_ID[m] = fix with ID that calculates a time-averaged nrho/temp as
its Mth column of array output</p></li>
</ul>
<p>The <em>temp</em> argument can also be specified as NULL, which drops the
(Tref/T) ratio term from the formula above. That is also effectively the
case if the reference species defines omega = 1/2. In that case, the
<em>temp</em> argument is ignored, whether it is NULL or not.</p>
<p>Note that if the value of <em>n</em> is 0.0 for a grid cell, its mean-free-path
will be set to 1.0e20 (infinite length).</p>
<p>The <a class="reference external" href="compute_grid.html">compute_grid</a> command can calculate a number
density, using its <em>nrho</em> value. It can also calculate a temperature
using its <em>temp</em> value. Note that this temperature is inferred from the
translational kinetic energy of the particles, which is only appopriate
for a mean free path calculation for systems with zero or small
streaming velocities. For systems with streaming flow, an appropriate
temperature can be calculated by the <a class="reference external" href="compute_thermal_grid.html">compute
thermal/grid</a> command. The formulas on its
doc page show that the the center-of-mass velocity from the particles in
each grid cell is subtracted from each particle’s velocity to yield a
translational thermal velocity, from which a thermal temperature is
calculated.</p>
<p>The <a class="reference external" href="fix_ave_grid.html">fix ave/grid</a> command can calculate the same
values in a time-averaged sense, assuming it uses these same computes as
input. Using this fix as input to this compute will thus yield less
noisy values, due to the time averaging.</p>
<p>Note that the compute or fix (via the compute(s) it uses as input) can
perform its number density or temperature calculation for a subset of
the particles based on the “mixture” it uses. See the
<a class="reference external" href="mixture.html">mixture</a> command for how a set of species can be
partitioned into groups.</p>
<p>IMPORTANT NOTE: If the ID of a <a class="reference external" href="fix_ave_grid.html">fix ave/grid</a>
command is used as the <em>nrho</em> or <em>temp</em> argument, it only produces
output on timesteps that are multiples of its <em>Nfreq</em> argument. Thus
this compute can only be invoked on those timesteps. For example, if a
<a class="reference external" href="dump.html">dump grid</a> command invokes this compute to write values
to a dump file, it must do so on timesteps that are multiples of
<em>Nfreq</em>.</p>
<p>One of the <em>kall</em> or <em>kx</em> or <em>ky</em> or <em>kz</em> extra arguments can be
optionally appended. If specified, this calculates an additional value
per grid cell, namely the dimensionless Knudsen number which is the
ratio of the mean free path to the cell size. For <em>kall</em>, the cell size
is taken to be the average of the three grid cell side lengths (or two
cell lengths for a 2d simulation). For <em>kx</em>, <em>ky</em>, or <em>kz</em>, the cell
size is the single cell side length in the corresponding x,y,z
dimension.</p>
<hr class="docutils" />
<p><strong>Output info:</strong></p>
<p>This compute calculates a per-grid vector or array. If one of <em>kall</em>,
<em>kx</em>, <em>ky</em>, or <em>kz</em> is not specified, then it is a vector. If one extra
argument is specified, it is an array with two columns. The vector or
first column of the array is the mean free path; the second column is
the Knudsen number.</p>
<p>This compute performs calculations for all flavors of child grid cells
in the simulation, which includes unsplit, cut, split, and sub cells.
See <a class="reference external" href="Section_howto.html#howto_8">Section 6.8</a> of the manual gives
details of how SPARTA defines child, unsplit, split, and sub cells. Note
that cells inside closed surfaces contain no particles. These could be
unsplit or cut cells (if they have zero flow volume). Both of these
kinds of cells will compute a zero result for all the individual values.
Likewise, split cells store no particles and will produce a zero result.
This is because their sub-cells actually contain the particles that are
geometrically inside the split cell.</p>
<p>The vector or array can be accessed by any command that uses per-grid
values from a compute as input. See <a class="reference external" href="Section_howto.html#howto_4">Section
4.4</a> for an overview of SPARTA output
options.</p>
<p>The per-grid array values for the vector or first column of the array
will be in distance <a class="reference external" href="units.html">units</a>. The second column of the
array will be dimensionless.</p>
<hr class="docutils" />
<p>Styles with a <em>kk</em> suffix are functionally the same as the corresponding
style without the suffix. They have been optimized to run faster,
depending on your available hardware, as discussed in the <a class="reference external" href="Section_accelerate.html">Accelerating
SPARTA</a> section of the manual. The
accelerated styles take the same arguments and should produce the same
results, except for different random number, round-off and precision
issues.</p>
<p>These accelerated styles are part of the KOKKOS package. They are only
enabled if SPARTA was built with that package. See the <a class="reference external" href="Section_start.html#start_3">Making
SPARTA</a> section for more info.</p>
<p>You can specify the accelerated styles explicitly in your input script
by including their suffix, or you can use the <a class="reference external" href="Section_start.html#start_6">-suffix command-line
switch</a> when you invoke SPARTA, or you
can use the <a class="reference external" href="suffix.html">suffix</a> command in your input script.</p>
<p>See the <a class="reference external" href="Section_accelerate.html">Accelerating SPARTA</a> section of the
manual for more instructions on how to use the accelerated styles
effectively.</p>
<hr class="docutils" />
<p><strong>Restrictions:</strong></p>
<p>To use this compute, a collision style must be defined via the
<a class="reference external" href="collide.html">collide</a> command, which defines properties for the
reference <em>species</em>.</p>
<p>As explained above, to use this compute with <em>nrho</em> or <em>temp</em> defined as
input from a <a class="reference external" href="fix_ave_grid.html">fix ave/grid</a> command, this compute
must only be invoked on timesteps that are multiples of the <em>Nfreq</em>
argument used by the fix, since those are the steps when it produces
output.</p>
<p><strong>Related commands:</strong></p>
<p><a class="reference internal" href="compute_grid.html#command-compute-grid"><span class="std std-ref">compute grid command</span></a>,
<a class="reference internal" href="compute_thermal_grid.html#command-compute-thermal-grid"><span class="std std-ref">compute thermal/grid command</span></a>,
<a class="reference internal" href="fix_ave_grid.html#command-fix-ave-grid"><span class="std std-ref">fix ave/grid command</span></a>,
<a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump grid</span></a></p>
<p><strong>Default:</strong> none</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="compute_pflux_grid.html" class="btn btn-neutral float-right" title="14.23. compute pflux/grid command" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="compute_ke_particle.html" class="btn btn-neutral float-left" title="14.19. compute ke/particle command" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>