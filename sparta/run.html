

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>run command &mdash; SPARTA 6 Jul 2020 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/rtd_overrides.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygm_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SPARTA
          

          
          </a>

          
            
            
              <div class="version">
                6 Jul 2020  (build: 22/07/2020)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Section_intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_start.html">2. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_commands.html">3. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_packages.html">4. Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_accelerate.html">5. Accelerating SPARTA performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_howto.html">6. How-to discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_example.html">7. Example problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_perf.html">8. Performance &amp; scalability</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_tools.html">9. Additional tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_modify.html">10. Modifying &amp; extending SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_python.html">11. Python interface to SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_errors.html">12. Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_history.html">13. Future and history</a></li>
</ul>

            
          
  <a href= "genindex.html">Index</a>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SPARTA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>run command</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/run.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="run-command">
<span id="command-run"></span><span id="index-0"></span><h1>run command<a class="headerlink" href="#run-command" title="Permalink to this headline">¶</a></h1>
<div class="section" id="syntax">
<h2>Syntax:<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<div class="highlight-xorg.conf notranslate"><div class="highlight"><pre><span></span><span class="nb">run</span> <span class="no">N keyword values ...</span>
</pre></div>
</div>
<ul>
<li><p>N = # of timesteps</p></li>
<li><p>zero or more keyword/value pairs may be appended</p></li>
<li><p>keyword = <code class="docutils literal notranslate"><span class="pre">upto</span></code> or <code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">stop</span></code> or <code class="docutils literal notranslate"><span class="pre">pre</span></code> or <code class="docutils literal notranslate"><span class="pre">post</span></code> or <code class="docutils literal notranslate"><span class="pre">every</span></code></p>
<ul>
<li><p><a class="reference internal" href="#command-run-upto"><span class="std std-ref">upto value</span></a> = none</p></li>
<li><p><a class="reference internal" href="#command-run-start"><span class="std std-ref">start value</span></a> = N1: timestep at which 1st run started</p></li>
<li><p><a class="reference internal" href="#command-run-stop"><span class="std std-ref">stop value</span></a> = N2:  timestep at which last run will end</p></li>
<li><p>pre value = no or yes</p></li>
<li><p>post value = no or yes</p></li>
<li><p>every values = M c1 c2 …</p>
<ul>
<li><p>M = break the run into M-timestep segments and invoke one or more commands between each segment</p></li>
<li><p>c1,c2,…,cN = one or more SPARTA commands, each enclosed in quotes</p>
<p>c1 = NULL means no command will be invoked</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples:<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-xorg.conf notranslate"><div class="highlight"><pre><span></span><span class="nb">run</span> <span class="no">10000</span>
<span class="nb">run</span> <span class="no">1000000 upto</span>
<span class="nb">run</span> <span class="no">100 start 0 stop 1000</span>
<span class="nb">run</span> <span class="no">1000 pre no post yes</span>
<span class="nb">run</span> <span class="no">100000 start 0 stop 1000000 every 1000 &quot;print &#39;Temp = $t&#39;&quot;</span>
<span class="nb">run</span> <span class="no">100000 every 1000 NULL</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description:<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Run or continue a simulation for a specified number of timesteps.</p>
<p>A value of N = 0 is acceptable; only the statistics of the system are
computed and printed without taking a timestep.</p>
<p id="command-run-upto">The <code class="docutils literal notranslate"><span class="pre">upto</span></code> keyword means to perform a run starting at the current
timestep up to the specified timestep. E.g. if the current timestep is
10,000 and “run 100000 upto” is used, then an additional 90,000
timesteps will be run. This can be useful for very long runs on a
machine that allocates chunks of time and terminate your job when time
is exceeded. If you need to restart your script multiple times (reading
in the last restart file), you can keep restarting your script with the
same run command until the simulation finally completes.</p>
<p id="command-run-stop"><span id="command-run-start"></span>The <code class="docutils literal notranslate"><span class="pre">start</span></code> or <code class="docutils literal notranslate"><span class="pre">stop</span></code> keywords can be used if multiple runs are being
performed and you want a <a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">variable</span></a> or
<a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a> command that changes some value over time (e.g.
target temperature) to make the change across the entire set of runs and
not just a single run.</p>
<p>For example, consider these commands followed by 10 run commands:</p>
<div class="highlight-xorg.conf notranslate"><div class="highlight"><pre><span></span>variable     myTemp equal ramp(300,500)
surf_collide 1 diffuse v_myTemp 0.5
run      1000 start 0 stop 10000
run      1000 start 0 stop 10000
...
run      1000 start 0 stop 10000
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ramp()</span></code> function in the <a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">variable</span></a> and its use in
the “surf_collide” command will ramp the target temperature from 300 to
500 during a run. If the run commands did not have the start/stop
keywords (just “run 1000”), then the temperature would ramp from 300 to
500 during the 1000 steps of each run. With the start/stop keywords, the
ramping takes place smoothly over the 10000 steps of all the runs
together.</p>
<p id="command-run-post"><span id="command-run-pre"></span>The <code class="docutils literal notranslate"><span class="pre">pre</span></code> and <code class="docutils literal notranslate"><span class="pre">post</span></code> keywords can be used to streamline the setup,
clean-up, and associated output to the screen that happens before and
after a run. This can be useful if you wish to do many short runs in
succession (e.g. SPARTA is being called as a library which is doing
other computations between successive short SPARTA runs).</p>
<p>By default (pre and post = yes), SPARTA zeroes statistical counts before
every run and initializes other <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fixes</span></a> and
<a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">computes</span></a> as needed. And after every run it gathers
and prints timings statistics. If a run is just a continuation of a
previous run (i.e. no settings are changed), the initial computation is
not necessary. So if <em>pre</em> is specified as “no” then the initial setup
is skipped, except for printing statistical info. Note that if <em>pre</em> is
set to “no” for the very 1st run SPARTA performs, then it is overridden,
since the initial setup computations must be done.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If your input script changes settings between 2 runs (e.g. adds a <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a> or <a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">compute</span></a>), then the initial setup must be performed.
SPARTA does not check for this, but it would be an error to use the <em>pre no</em> option in this case.</p>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">post</span></code> is specified as “no”, the full timing and statistical output
is skipped; only a one-line summary timing is printed.</p>
<p id="command-run-every">The <code class="docutils literal notranslate"><span class="pre">every</span></code> keyword provides a means of breaking a SPARTA run into a
series of shorter runs. Optionally, one or more SPARTA commands (c1, c2,…, cN)
will be executed in between the short runs. If used, the
<code class="docutils literal notranslate"><span class="pre">every</span></code> keyword must be the last keyword, since it has a variable number
of arguments. Each of the trailing arguments is a single SPARTA command,
and each command should be enclosed in quotes, so that the entire
command will be treated as a single argument. This will also prevent any
variables in the command from being evaluated until it is executed
multiple times during the run. Note that if a command itself needs one
of its arguments quoted (e.g. the <a class="reference internal" href="print.html#command-print"><span class="std std-ref">print</span></a> command), then
you can use a combination of single and double quotes, as in the example
above or below.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">every</span></code> keyword is a means to avoid listing a long series of runs
and interleaving commands in your input script. For example, a
<a class="reference internal" href="print.html#command-print"><span class="std std-ref">print</span></a> command could be invoked or a <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a>
could be redefined, e.g. to reset a load balancing parameter. Or this
could be useful for invoking a command you have added to SPARTA that
wraps some other code (e.g. as a library) to perform a computation
periodically during a long SPARTA run. See <a class="reference internal" href="Section_modify.html#modify"><span class="std std-ref">Section 8</span></a> of the manual for info about how to add new
commands to SPARTA. See <a class="reference internal" href="Section_howto.html#howto-restarting"><span class="std std-ref">Section 6.7</span></a> of
the manual for ideas about how to couple SPARTA to other codes.</p>
<p>With the <code class="docutils literal notranslate"><span class="pre">every</span></code> option, N total steps are simulated, in shorter runs of
M steps each. After each M-length run, the specified commands are
invoked. If only a single command is specified as NULL, then no command
is invoked. Thus these lines:</p>
<div class="highlight-xorg.conf notranslate"><div class="highlight"><pre><span></span><span class="nb">compute</span> <span class="no">t temp</span>
<span class="nb">variable</span> <span class="no">myT equal c_t</span>
<span class="nb">run</span> <span class="no">6000 every 2000 &quot;print &#39;Temp = $myT&#39;&quot;</span>
</pre></div>
</div>
<p>are the equivalent of:</p>
<div class="highlight-xorg.conf notranslate"><div class="highlight"><pre><span></span><span class="nb">compute</span> <span class="no">t temp</span>
<span class="nb">variable</span> <span class="no">myT equal c_t</span>
<span class="nb">run</span> <span class="no">2000</span>
<span class="nb">print</span> <span class="no">&quot;Temp = $myT&quot;</span>
<span class="nb">run</span> <span class="no">2000</span>
<span class="nb">print</span> <span class="no">&quot;Temp = $myT&quot;</span>
<span class="nb">run</span> <span class="no">2000</span>
<span class="nb">print</span> <span class="no">&quot;Temp = $myT&quot;</span>
</pre></div>
</div>
<p>which does 3 runs of 2000 steps and prints the x-coordinate of a
particular atom between runs. Note that the variable “$q” will be
evaluated afresh each time the print command is executed.</p>
<p>Note that by using the line continuation character “&amp;”, the run every
command can be spread across many lines, though it is still a single
command:</p>
<div class="highlight-xorg.conf notranslate"><div class="highlight"><pre><span></span>run 100000 every 1000 &amp;
  &quot;print &#39;Minimum value = $a&#39;&quot; &amp;
  &quot;print &#39;Maximum value = $b&#39;&quot; &amp;
  &quot;print &#39;Temp = $c&#39;&quot;
</pre></div>
</div>
<p>If the <em>pre</em> and <em>post</em> options are set to “no” when used with the
<em>every</em> keyword, then the 1st run will do the full setup and the last
run will print the full timing summary, but these operations will be
skipped for intermediate runs.</p>
<p>IMPORTANT NOTE: You might hope to specify a command that exits the run
by jumping out of the loop, e.g.</p>
<div class="highlight-xorg.conf notranslate"><div class="highlight"><pre><span></span><span class="nb">compute</span> <span class="no">t temp</span>
<span class="nb">variable</span> <span class="no">T equal c_t</span>
<span class="nb">run</span> <span class="no">10000 every 100 &quot;if &#39;$T &lt; 300.0&#39; then &#39;jump SELF afterrun&#39;&quot;</span>
</pre></div>
</div>
<p>Unfortunately this will not currently work. The run command simply
executes each command one at a time each time it pauses, then continues
the run. You can replace the jump command with a simple
<a class="reference internal" href="quit.html#command-quit"><span class="std std-ref">quit</span></a> command and cause SPARTA to exit during the middle
of a run when the condition is met.</p>
</div>
<div class="section" id="restrictions">
<h2>Restrictions:<a class="headerlink" href="#restrictions" title="Permalink to this headline">¶</a></h2>
<p>The number of specified timesteps N must fit in a signed 32-bit integer,
so you are limited to slightly more than 2 billion steps (2^31) in a
single run. However, you can perform successive runs to run a simulation
for any number of steps (ok, up to 2^63 steps).</p>
</div>
<div class="section" id="related-commands">
<h2>Related commands:<a class="headerlink" href="#related-commands" title="Permalink to this headline">¶</a></h2>
<p>none</p>
</div>
<div class="section" id="default">
<h2>Default:<a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h2>
<p>The option defaults are start = the current timestep, stop = current
timestep + N, pre = yes, and post = yes.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>