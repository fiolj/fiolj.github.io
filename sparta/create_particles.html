

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>create_particles command &mdash; SPARTA 7 May 2020 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/rtd_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SPARTA
          

          
          </a>

          
            
            
              <div class="version">
                7 May 2020
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Section_intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_start.html">2. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_commands.html">3. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_packages.html">4. Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_accelerate.html">5. Accelerating SPARTA performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_howto.html">6. How-to discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_example.html">7. Example problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_perf.html">8. Performance &amp; scalability</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_tools.html">9. Additional tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_modify.html">10. Modifying &amp; extending SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_python.html">11. Python interface to SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_errors.html">12. Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_history.html">13. Future and history</a></li>
</ul>

            
          
  <a href= "genindex.html">Index</a>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SPARTA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>create_particles command</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/create_particles.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="index-0"></span><div class="section" id="create-particles-command">
<span id="command-create-particles"></span><span id="index-1"></span><h1>create_particles command<a class="headerlink" href="#create-particles-command" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="create-particles-kk-command">
<h1>create_particles/kk command<a class="headerlink" href="#create-particles-kk-command" title="Permalink to this headline">¶</a></h1>
<p><strong>Syntax:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">create_particles</span> <span class="n">mix</span><span class="o">-</span><span class="n">ID</span> <span class="n">style</span> <span class="n">args</span> <span class="n">keyword</span> <span class="n">value</span> <span class="o">...</span>
</pre></div>
</div>
<ul>
<li><p>mix-ID = ID of mixture to use when creating particles</p></li>
<li><p>style = <em>n</em> or <em>single</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">n</span> <span class="n">args</span> <span class="o">=</span> <span class="n">Np</span>
  <span class="n">Np</span> <span class="o">=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">number</span> <span class="n">of</span> <span class="n">particles</span> <span class="n">to</span> <span class="n">create</span>
<span class="n">single</span> <span class="n">args</span> <span class="o">=</span> <span class="n">species</span><span class="o">-</span><span class="n">ID</span> <span class="n">x</span> <span class="n">y</span> <span class="n">z</span> <span class="n">vx</span> <span class="n">vy</span> <span class="n">vz</span>
  <span class="n">species</span><span class="o">-</span><span class="n">ID</span> <span class="o">=</span> <span class="n">ID</span> <span class="n">of</span> <span class="n">species</span> <span class="n">of</span> <span class="n">single</span> <span class="n">particle</span>
  <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span> <span class="o">=</span> <span class="n">position</span> <span class="n">of</span> <span class="n">particle</span> <span class="p">(</span><span class="n">distance</span> <span class="n">units</span><span class="p">)</span>
  <span class="n">vx</span><span class="p">,</span><span class="n">vy</span><span class="p">,</span><span class="n">vz</span> <span class="o">=</span> <span class="n">velocity</span> <span class="n">of</span> <span class="n">particle</span> <span class="p">(</span><span class="n">velocity</span> <span class="n">units</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>zero or more keyword/value pairs may be appended</p></li>
<li><p>keyword = <em>global</em> or <em>region</em> or <em>species</em> or <em>density</em> or
<em>temperature</em> or <em>velocity</em> or <em>twopass</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">global</span> <span class="n">value</span> <span class="o">=</span> <span class="n">yes</span> <span class="ow">or</span> <span class="n">no</span>
<span class="n">region</span> <span class="n">value</span> <span class="o">=</span> <span class="n">region</span><span class="o">-</span><span class="n">ID</span>
<span class="n">species</span> <span class="n">values</span> <span class="o">=</span> <span class="n">svar</span> <span class="n">xvar</span> <span class="n">yvar</span> <span class="n">zvar</span>
<span class="n">density</span> <span class="n">values</span> <span class="o">=</span> <span class="n">dvar</span> <span class="n">xvar</span> <span class="n">yvar</span> <span class="n">zvar</span>
<span class="n">temperature</span> <span class="n">values</span> <span class="o">=</span> <span class="n">tvar</span> <span class="n">xvar</span> <span class="n">yvar</span> <span class="n">zvar</span>
<span class="n">velocity</span> <span class="n">values</span> <span class="o">=</span> <span class="n">vxvar</span> <span class="n">vyvar</span> <span class="n">vzvar</span> <span class="n">xvar</span> <span class="n">yvar</span> <span class="n">zvar</span>
<span class="n">twopass</span> <span class="n">values</span> <span class="o">=</span> <span class="n">none</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">create_particles</span> <span class="n">background</span> <span class="n">n</span> <span class="mi">0</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">100000</span> <span class="n">region</span> <span class="n">sphere</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">100000</span> <span class="k">global</span> <span class="n">yes</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">single</span> <span class="mi">3</span> <span class="mf">5.0</span> <span class="mf">6.0</span> <span class="mf">5.4</span> <span class="mf">10.0</span> <span class="o">-</span><span class="mf">1.0</span> <span class="mf">0.0</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">0</span> <span class="n">species</span> <span class="n">mySpecies</span> <span class="n">xpos</span> <span class="n">NULL</span> <span class="n">zpos</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">0</span> <span class="n">density</span> <span class="n">myDens</span> <span class="n">xgrid</span> <span class="n">ygrid</span> <span class="n">NULL</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">0</span> <span class="n">temperature</span> <span class="n">myTemp</span> <span class="n">xgrid</span> <span class="n">ygrid</span> <span class="n">zgrid</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">0</span> <span class="n">velocity</span> <span class="n">myVx</span> <span class="n">NULL</span> <span class="n">myVz</span> <span class="n">xpos</span> <span class="n">ypos</span> <span class="n">NULL</span> <span class="n">twopass</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Create particles and add them to the simulation domain. The attributes
of individual particles, such as species and velocity, are determined by
the mixture attributes, as specied by the <em>mix-ID</em>. In particular the
<em>temp</em>, <em>trot</em>, <em>tvib</em>, and <em>vstream</em> attributes of the mixture affect
create particle velocities and internal energy modes. See the
<a class="reference external" href="mixture.html">mixture</a> command for more details. Note that this
command can be used multiple times to add more and more particles.</p>
<p>Particles are only created in grid cells which are entirely external to
surfaces. Particles are not created in grid cells cut by surfaces.</p>
<p>IMPORTANT NOTE: When a particle is created at a specified temperature
(as set by the <a class="reference external" href="mixture.html">mixture</a> command), it’s rotational and
vibrational energy will also be initialized, consistent with the mixture
temperatures. The <em>rotate</em> and <em>vibrate</em> options of the
<a class="reference external" href="collide_modify.html">collide_modify</a> command determine how internal
energy modes are initialized. If the <a class="reference external" href="collide.html">collide</a> command
has not yet been specified, then no rotational or vibrational energy
will be assigned to created particles. Thus if you wish to create
particles with non-zero internal energy, the <a class="reference external" href="collide.html">collide</a>
and (optionally) <a class="reference external" href="collide_modify.html">collide_modify</a> commands must
be used before this command.</p>
<p>If the <em>n</em> style is used with <em>Np</em> = 0, then the number of created
particles is calculated by SPARTA as a function of the global <em>fnum</em>
value, the mixture number density, and the flow volume of the simulation
domain.</p>
<p>The <em>fnum</em> value is set by the <a class="reference external" href="global.html">global fnum</a> command.
The mixture <em>nrho</em> is set by the <a class="reference external" href="mixture.html">mixture</a> command. The
flow volume of the simulation is the total volume of the simulation
domain as specified by the <a class="reference external" href="create_box.html">create_box</a> command,
minus any volume that is interior to surfaces defined by the
<a class="reference external" href="read_surf.html">read_surf</a> command. Note that the flow volume
includes volume contributions from grid cells cut by surfaces. However
particles are only created in grid cells entirely external to surfaces.
This means that particles may be created in external cells at a
(slightly) higher density to compensate for no particles being created
in cut cells that still contribute to the overall flow volume.</p>
<p>If the <em>n</em> style is used with a non-zero <em>Np</em>, then exactly <em>Np</em>
particles are created, which can be useful for debugging or benchmarking
purposes.</p>
<p>Based on the value of <em>Np</em>, each grid cell will have a target number of
particles <em>M</em> to insert, which is a function of the cell’s volume as
compared to the total system flow volume. If <em>M</em> has a fractional value,
e.g. 12.5, then 12 particles will be inserted, and a 13th depending on
the outcome of a random number generation. As grid cells are looped
over, the remainder fraction is accumulated, so that exactly <em>Np</em>
particles are created across all the processors.</p>
<p>IMPORTANT NOTE: The preceeding calculation is actually done using
<em>weighted</em> cell volumes. Grid cells can be weighted using the <a class="reference external" href="global.html">global
weight</a> command.</p>
<p>Each particle is inserted at a random location within the grid cell. The
particle species is chosen randomly in accord with the <em>frac</em> settings
of the collection of species in the mixture, as set by the
<a class="reference external" href="mixture.html">mixture</a> command. The velocity of the particle is set
to the sum of the streaming velocity of the mixture and a thermal
velocity sampled from the thermal temperature of the mixture. Both the
streaming velocity and thermal temperature are also set by the
<a class="reference external" href="mixture.html">mixture</a> command. The internal rotational and
vibrational energies of the particle are also set based on the <em>trot</em>
and <em>tvib</em> settings for the mixture, as explained above.</p>
<p>The <em>single</em> style creates a single particle. This can be useful for
debugging purposes, e.g. to advect a single particle towards a surface.
A single particle of the specified species is inserted at the specified
position and with the specified velocity. In this case the <em>mix-ID</em> is
ignored.</p>
<hr class="docutils" />
<p>This is the meaning of the other allowed keywords.</p>
<p>The <em>global</em> keyword only applies when the <em>n</em> style is used, and
controls how particles are generated in parallel.</p>
<p>If the value is <em>yes</em>, then every processor loops over all <em>Np</em>
particles. As the coordinates of each is generated, each processor
checks what grid cell it is in, and only stores the particle if it owns
that grid cell. Thus an identical set of particles are created, no
matter how many processors are running the simulation</p>
<p>IMPORTANT NOTE: The <em>global</em> yes option is not yet implemented.</p>
<p>If the value is <em>no</em>, then each of the <em>P</em> processors generates a <em>N/P</em>
subset of particles, using its own random number generation. It only
adds particles to grid cells that it owns, as described above. This is a
faster way to generate a large number of particles, but means that the
individual attributes of particles will depend on the number of
processors and the mapping of grid cells to procesors. The overall set
of created particles should have the same statistical properties as with
the <em>yes</em> setting.</p>
<p>If the <em>region</em> keyword is used, then a particle will only added if its
position is within the specified <em>region-ID</em>. This can be used to only
allow particle insertion within a subset of the simulation domain. Note
that the <em>side</em> option for the <a class="reference external" href="region.html">region</a> command can be
used to define whether the inside or outside of the geometric region is
considered to be “in” the region.</p>
<p>IMPORTANT NOTE: If the <em>region</em> and <em>n</em> keywords are used together, less
than N particles may be added. This is because grid cells will be
candidates for particle insertion, unless they are entirely outside the
bounding box that encloses the region. Particles those grid cells
attempt to add are included in the count for N, even if some or all of
the particle insertions are rejected due to not being inside the region.</p>
<p>The <em>species</em> keyword can be used to create particles with a
spatially-dependent separation of species. The specified <em>svar</em> is the
name of an <a class="reference external" href="variable.html">equal-style variable</a> whose formula should
evaluate to a species number, i.e. an integer from 1 to Nsp, where Nsp
is the number of species in the mixture with mix-ID. Since equal-style
variables evaluate to floating-point values, this value is truncated to
an integer value. The formula for the species variable can use one or
two or three variables which will store the x, y, or z coordinates of
the particle that is being created. If used, these variables must be
<a class="reference external" href="variable.html">internal-style variables</a> defined in the input
script; their initial numeric values can be anything. They must be
internal-style variables, because this command resets their values
directly. Their names are specified as <em>xvar</em>, <em>yvar</em>, and <em>zvar</em>. If
any of them is not used in the <em>svar</em> formula, it can be specified as
NULL.</p>
<p>When a particle is added, its coordinates are stored in the <em>xvar</em>,
<em>yvar</em>, <em>zvar</em> variables if they are specified. The <em>svar</em> variable is
then evaluated. The returned value is used to set the species of that
particle, based on the list of species defined for the mixture. If the
returned value is &lt;= 0 or greater than Nsp = the number of species in
the mixture, then no particle is created.</p>
<p>As an example, these commands can be used in a 2d simulation, to create
a particle distribution with species 1 on top of species 2 with a
sinudoidal interface between the two species, as illustrated in the
snapshot of the initial particle distribution. Click on the image for a
larger version. Note that when using this option less than the requested
N particles can be created if the species variable returns values &lt;= 0
or greater than Nsp = the number of species in the mixture.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="n">x</span> <span class="n">internal</span> <span class="mi">0</span>
<span class="n">variable</span> <span class="n">y</span> <span class="n">internal</span> <span class="mi">0</span>
<span class="n">variable</span> <span class="n">n</span> <span class="n">equal</span> <span class="mi">3</span>
<span class="n">variable</span> <span class="n">s</span> <span class="n">equal</span> <span class="s2">&quot;(v_y &lt; 0.5*(ylo+yhi) + 0.15*yhi*sin(2*PI*v_n*v_x/xhi)) + 1&quot;</span>
<span class="n">create_particles</span> <span class="n">species</span> <span class="n">n</span> <span class="mi">10000</span> <span class="n">species</span> <span class="n">s</span> <span class="n">x</span> <span class="n">y</span> <span class="n">NULL</span>
</pre></div>
</div>
<p><a class="reference external" href="JPG/species_variation.jpg"><img alt="image0" src="_images/species_variation_small.jpg" /></a></p>
<p>The <em>density</em> keyword can be used to create particles with a
spatially-dependent density variation. The specified <em>dvar</em> is the name
of an <a class="reference external" href="variable.html">equal-style variable</a> whose formula should
evaluate to a positive value. The formula for <em>dvar</em> can use one or two
or three variables which will store the x, y, or z coordinates of the
geometric center point of a grid cell. If used, these other variables
must be <a class="reference external" href="variable.html">internal-style variables</a> defined in the
input script; their initial numeric values can by anything. Their names
are specified as <em>xvar</em>, <em>yvar</em>, and <em>zvar</em>. If any of them is not used
in the <em>dvar</em> formula, it can be specified as NULL.</p>
<p>When particles are added to a grid cell, its center point coordinates
are stored in <em>xvar</em>, <em>yvar</em>, <em>zvar</em> if they are defined. The <em>dvar</em>
variable is then evaluated. The returned value is used as a scale factor
on the number of particles to create in that grid cell. Thus a value of
0.5 would create half as many particles in that grid cell as would
otherwise be the case, due to the global <em>fnum</em> and mixture <em>nrho</em>
settings that define the density, as explained above. A value of 1.2
would create 20% more particles in that grid cell.</p>
<p>As an example, these commands can be used in a 2d simulation, to create
more particles towards the upper right corner of the domain and less
towards the lower left corner, as illustrated in the snapshot of the
initial particle distribution. Click on the image for a larger version.
Note that less than requested N particles will be created in this case
because all the scale factors generated by the variable <em>d</em> are less
than 1.0.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="n">x</span> <span class="n">internal</span> <span class="mi">0</span>
<span class="n">variable</span> <span class="n">y</span> <span class="n">internal</span> <span class="mi">0</span>
<span class="n">variable</span> <span class="n">d</span> <span class="n">equal</span> <span class="s2">&quot;v_x/xhi * v_y/yhi&quot;</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">10000</span> <span class="n">density</span> <span class="n">d</span> <span class="n">x</span> <span class="n">y</span> <span class="n">NULL</span>
</pre></div>
</div>
<p><a class="reference external" href="JPG/density_variation.jpg"><img alt="image1" src="_images/density_variation_small.jpg" /></a></p>
<p>The <em>temperature</em> keyword can be used to create particles with a
spatially-dependent thermal temperature variation. The specified <em>tvar</em>
is the name of an <a class="reference external" href="variable.html">equal-style variable</a> whose formula
should evaluate to a positive value. The formula for the <em>tvar</em> variable
can use one or two or three variables which will store the x, y, or z
coordinates of the geometric center point of a grid cell. If used, these
other variables must be <a class="reference external" href="variable.html">internal-style variables</a>
defined in the input script; their initial numeric values can by
anything. Their names are specified as <em>xvar</em>, <em>yvar</em>, and <em>zvar</em>. If
any of them is not used in the <em>tvar</em> formula, it can be specified as
NULL.</p>
<p>When particles are added to a grid cell, its center point coordinates
are stored in <em>xvar</em>, <em>yvar</em>, <em>zvar</em> if they are defined. The <em>tvar</em>
variable is then evaluated. The returned value is used as a scale factor
on the thermal temperature number for particles created in that grid
cell. Thus a value of 0.5 would create particles with a thermal
temperature half of what would otherwise be the case, due to the mixture
<em>temp</em> setting which defines the thermal temperature, as explained
above. A value of 1.2 would create particles with a 20% higher thermal
temperature.</p>
<p>As an example, these commands can be used in a 2d simulation, to create
a thermal temperature gradient in x, where the temperature on the left
side of the box is the default value, and the temperature on the right
side is 3x larger.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="n">x</span> <span class="n">internal</span> <span class="mi">0</span>
<span class="n">variable</span> <span class="n">t</span> <span class="n">equal</span> <span class="s2">&quot;1.0 + 2.0*(v_x-xlo)/(xhi-xlo)&quot;</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">10000</span> <span class="n">temperature</span> <span class="n">t</span> <span class="n">x</span> <span class="n">NULL</span> <span class="n">NULL</span>
</pre></div>
</div>
<p>The <em>velocity</em> keyword can be used to create particles with a
spatially-dependent streaming velocity. The specified <em>vxvar</em>, <em>vyvar</em>,
<em>vzvar</em> are the names of <a class="reference external" href="variable.html">equal-style variables</a> whose
formulas should evaluate to the corresponding component of the streaming
velocity. If any of them are specified as NULL, then that streaming
velocity component is set by the corresponding global or mixture
streaming velocity component, the same as if the <em>velocity</em> keyword were
not used.</p>
<p>The formulas for the <em>vxvar</em>, <em>vyvar</em>, <em>vzvar</em> variables can use one or
two or three variables which will store the x, y, or z coordinates of
the particle that is being created. If used, these other variables must
be <a class="reference external" href="variable.html">internal-style variables</a> defined in the input
script; their initial numerica values can by anything. Their names are
specified as <em>xvar</em>, <em>yvar</em>, and <em>zvar</em>. If any of them is not used in
the <em>vxvar</em>, <em>vyvar</em>, <em>vzvar</em> formulas, it can be specified as NULL.</p>
<p>When a particle is added, its coordinates are stored in <em>xvar</em>, <em>yvar</em>,
<em>zvar</em> if they are defined. The <em>vxvar</em>, <em>vyvar</em>, <em>vzvar</em> variables are
then evaluated. The returned values are used to set the streaming
velocity of that particle. A thermal velocity is also added to the
particle, using the the global or mixture temperature, as described
above.</p>
<p>As an example, these commands can be used in a 2d simulation, to give
particles an initial velocity pointing towards the upper right corner of
the domain with a magnitude that makes them all reach that point at the
same time (assuming their thermal velocity is small and it is not a
collisional flow). Click on the image to play an animation of the
effect.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">variable</span> <span class="n">x</span> <span class="n">internal</span> <span class="mi">0</span>
<span class="n">variable</span> <span class="n">y</span> <span class="n">internal</span> <span class="mi">0</span>
<span class="n">variable</span> <span class="n">vx</span> <span class="n">equal</span> <span class="p">(</span><span class="n">xhi</span><span class="o">-</span><span class="n">v_x</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="mf">7.0e-9</span><span class="p">)</span>  <span class="c1"># timesteps and timestep-size</span>
<span class="n">variable</span> <span class="n">vy</span> <span class="n">equal</span> <span class="p">(</span><span class="n">yhi</span><span class="o">-</span><span class="n">v_y</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="mf">7.0e-9</span><span class="p">)</span>
<span class="n">create_particles</span> <span class="n">air</span> <span class="n">n</span> <span class="mi">10000</span> <span class="n">velocity</span> <span class="n">vx</span> <span class="n">vy</span> <span class="n">NULL</span> <span class="n">x</span> <span class="n">y</span> <span class="n">NULL</span>
</pre></div>
</div>
<p><a class="reference external" href="JPG/velocity_variation.gif"><img alt="image2" src="_images/velocity_variation_small.jpg" /></a></p>
<p>The <em>twopass</em> keyword does not require a value. If used, the creation
procedure will loop over the creation grid cells twice, the same as the
KOKKOS package version of this command does, so that it can reallocate
memory efficiently, e.g. on a GPU. If this keyword is used the
non-KOKKOS and KOKKOS version will generate exactly the same set of
particles, which makes debugging easier. If the keyword is not used, the
non-KOKKOS and KOKKOS runs will use random numbers differently and thus
generate different particles, though they will be statistically similar.</p>
<hr class="docutils" />
<p>This command (or more generically styles) can take a suffix as shown at
the top of this page.</p>
<p>Styles with a <em>kk</em> suffix are functionally the same as the corresponding
style without the suffix. They have been optimized to run faster,
depending on your available hardware, as discussed in the <a class="reference external" href="Section_accelerate.html">Accelerating
SPARTA</a> section of the manual. The
accelerated styles take the same arguments and should produce the same
results, except for different random number, round-off and precision
issues.</p>
<p>These accelerated styles are part of the KOKKOS package. They are only
enabled if SPARTA was built with that package. See the <a class="reference external" href="Section_start.html#start_3">Making
SPARTA</a> section for more info.</p>
<p>You can specify the accelerated styles explicitly in your input script
by including their suffix, or you can use the <a class="reference external" href="Section_start.html#start_6">-suffix command-line
switch</a> when you invoke SPARTA, or you
can use the <a class="reference external" href="suffix.html">suffix</a> command in your input script.</p>
<p>See the <a class="reference external" href="Section_accelerate.html">Accelerating SPARTA</a> section of the
manual for more instructions on how to use the accelerated styles
effectively.</p>
<hr class="docutils" />
<p><strong>Restrictions:</strong> none</p>
<p><strong>Related commands:</strong></p>
<p><a class="reference internal" href="mixture.html#command-mixture"><span class="std std-ref">mixture command</span></a>,
<a class="reference internal" href="fix_emit_face.html#command-fix-emit-face"><span class="std std-ref">fix emit/face command</span></a></p>
<p><strong>Default:</strong></p>
<p>The option default is global = no.</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>