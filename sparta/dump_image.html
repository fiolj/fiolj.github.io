

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>dump image command &mdash; SPARTA 7 May 2020 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/rtd_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SPARTA
          

          
          </a>

          
            
            
              <div class="version">
                7 May 2020  (build: 08/07/2020)
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Section_intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_start.html">2. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_commands.html">3. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_packages.html">4. Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_accelerate.html">5. Accelerating SPARTA performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_howto.html">6. How-to discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_example.html">7. Example problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_perf.html">8. Performance &amp; scalability</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_tools.html">9. Additional tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_modify.html">10. Modifying &amp; extending SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_python.html">11. Python interface to SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_errors.html">12. Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_history.html">13. Future and history</a></li>
</ul>

            
          
  <a href= "genindex.html">Index</a>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SPARTA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>dump image command</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/dump_image.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="index-0"></span><div class="section" id="dump-image-command">
<span id="command-dump-image"></span><span id="index-1"></span><h1>dump image command<a class="headerlink" href="#dump-image-command" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="dump-movie-command">
<span id="command-dump-image-command-dump-movie"></span><h1>dump movie command<a class="headerlink" href="#dump-movie-command" title="Permalink to this headline">¶</a></h1>
<div class="section" id="syntax">
<h2>Syntax:<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dump</span> <span class="n">ID</span> <span class="n">style</span> <span class="n">mix</span><span class="o">-</span><span class="n">ID</span> <span class="n">N</span> <span class="n">file</span> <span class="n">color</span> <span class="n">diameter</span> <span class="n">keyword</span> <span class="n">value</span> <span class="o">...</span>
</pre></div>
</div>
<ul>
<li><p>ID = user-assigned name for the dump</p></li>
<li><p>style = <em>image</em> or <em>movie</em> = style of dump command (other styles
<em>particle</em> or <em>grid</em> or <em>surf</em> are discussed on the
<a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump command</span></a> doc page)</p></li>
<li><p>mix-ID = mixture ID for which particles to include in image</p></li>
<li><p>N = dump every this many timesteps</p></li>
<li><p>file = name of file to write image to</p></li>
<li><p>color = particle attribute that determines color of each particle</p></li>
<li><p>diameter = particle attribute that determines size of each particle</p></li>
<li><p>zero or more keyword/value pairs may be appended</p></li>
<li><p>keyword = <em>particle</em> or <em>pdiam</em> or <em>grid</em> or <em>gridx</em> or <em>gridy</em> or
<em>gridz</em> or <em>surf</em> or <em>size</em> or <em>view</em> or <em>center</em> or <em>up</em> or <em>zoom</em>
or <em>persp</em> or <em>box</em> or <em>gline</em> or <em>sline</em> or <em>axes</em> or <em>shiny</em> or
<em>ssao</em></p>
<dl class="simple">
<dt>particle = yes/no</dt><dd><p>do or do not draw particles</p>
</dd>
<dt>pdiam value = number</dt><dd><p>numeric value for particle diameter (distance units)</p>
</dd>
<dt>grid values = color</dt><dd><p>color = proc or per-grid compute or fix</p>
</dd>
<dt>gridx values = xcoord color</dt><dd><ul class="simple">
<li><p>xcoord = x value to dray yz plane of grid cells at</p></li>
<li><p>color = proc or per-grid compute or fix</p></li>
</ul>
</dd>
<dt>gridy values = ycoord color</dt><dd><ul class="simple">
<li><p>ycoord = y value to dray xz plane of grid cells at</p></li>
<li><p>color = proc or per-grid compute or fix</p></li>
</ul>
</dd>
<dt>gridz values = zcoord color</dt><dd><ul class="simple">
<li><p>zcoord = z value to dray xy plane of grid cells at</p></li>
<li><p>color = proc or per-grid compute or fix</p></li>
</ul>
</dd>
<dt>surf values = color diam</dt><dd><ul class="simple">
<li><p>color = one or proc or per-surf compute or fix</p></li>
<li><p>diam = diameter of 2d lines as fraction of shortest box length</p></li>
</ul>
</dd>
<dt>size values = width height = size of images</dt><dd><ul class="simple">
<li><p>width = width of image in # of pixels</p></li>
<li><p>height = height of image in # of pixels</p></li>
</ul>
</dd>
<dt>view values = theta phi = view of simulation box</dt><dd><ul class="simple">
<li><p>theta = view angle from +z axis (degrees)</p></li>
<li><p>phi = azimuthal view angle (degrees)</p></li>
<li><p>theta or phi can be a variable (see below)</p></li>
</ul>
</dd>
<dt>center values = flag Cx Cy Cz = center point of image</dt><dd><ul class="simple">
<li><p>flag = “s” for static, “d” for dynamic</p></li>
<li><p>Cx,Cy,Cz = center point of image as fraction of box dimension (0.5 = center of box)</p></li>
<li><p>Cx,Cy,Cz can be variables (see below)</p></li>
</ul>
</dd>
<dt>up values = Ux Uy Uz = direction that is “up” in image</dt><dd><ul class="simple">
<li><p>Ux,Uy,Uz = components of up vector</p></li>
<li><p>Ux,Uy,Uz can be variables (see below)</p></li>
</ul>
</dd>
<dt>zoom value = zfactor = size that simulation box appears in image</dt><dd><ul class="simple">
<li><p>zfactor = scale image size by factor &gt; 1 to enlarge, factor &lt; 1 to shrink</p></li>
<li><p>zfactor can be a variable (see below)</p></li>
</ul>
</dd>
<dt>persp value = pfactor = amount of “perspective” in image</dt><dd><ul class="simple">
<li><p>pfactor = amount of perspective (0 = none, &lt; 1 = some, &gt; 1 = highly skewed)</p></li>
<li><p>pfactor can be a variable (see below)</p></li>
</ul>
</dd>
<dt>box values = yes/no diam = draw outline of simulation box</dt><dd><ul class="simple">
<li><p>yes/no = do or do not draw simulation box lines</p></li>
<li><p>diam = diameter of box lines as fraction of shortest box length</p></li>
</ul>
</dd>
<dt>gline values = yes/no diam = draw outline of each grid cell</dt><dd><ul class="simple">
<li><p>yes/no = do or do not draw grid cell outlines</p></li>
<li><p>diam = diameter of grid outlines as fraction of shortest box length</p></li>
</ul>
</dd>
<dt>sline values = yes/no diam = draw outline of each surface element</dt><dd><ul class="simple">
<li><p>yes/no = do or do not draw surf element outlines</p></li>
<li><p>diam = diameter of surf element outlines as fraction of shortest box length</p></li>
</ul>
</dd>
<dt>axes values = yes/no length diam = draw xyz axes</dt><dd><ul class="simple">
<li><p>yes/no = do or do not draw xyz axes lines next to simulation box</p></li>
<li><p>length = length of axes lines as fraction of respective box lengths</p></li>
<li><p>diam = diameter of axes lines as fraction of shortest box length</p></li>
</ul>
</dd>
<dt>shiny value = sfactor = shinyness of spheres and cylinders</dt><dd><p>sfactor = shinyness of spheres and cylinders from 0.0 to 1.0</p>
</dd>
<dt>ssao value = yes/no seed dfactor = SSAO depth shading</dt><dd><ul class="simple">
<li><p>yes/no = turn depth shading on/off</p></li>
<li><p>seed = random # seed (positive integer)</p></li>
<li><p>dfactor = strength of shading from 0.0 to 1.0</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples:<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dump</span> <span class="n">myDump</span> <span class="n">image</span> <span class="nb">all</span> <span class="mi">100</span> <span class="n">dump</span><span class="o">.*.</span><span class="n">jpg</span> <span class="nb">type</span> <span class="nb">type</span>
<span class="n">dump</span> <span class="n">myDump</span> <span class="n">movie</span> <span class="nb">all</span> <span class="mi">100</span> <span class="n">movie</span><span class="o">.</span><span class="n">mpg</span> <span class="nb">type</span> <span class="nb">type</span>
</pre></div>
</div>
<p>These commands will dump shapshot images of all particles whose species
are in the <em>mix-ID</em> to a file every 100 steps. The last two shell
command will make a movie from the JPG files (once the run has finished)
and play it in the Firefox browser:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dump</span>                <span class="mi">4</span> <span class="n">image</span> <span class="nb">all</span> <span class="mi">100</span> <span class="n">tmp</span><span class="o">.*.</span><span class="n">jpg</span> <span class="nb">type</span> <span class="nb">type</span> <span class="n">pdiam</span> <span class="mf">0.2</span> <span class="n">view</span> <span class="mi">90</span> <span class="o">-</span><span class="mi">90</span>
<span class="n">dump_modify</span>     <span class="mi">4</span> <span class="n">pad</span> <span class="mi">4</span>
<span class="o">%</span> <span class="n">convert</span> <span class="n">tmp</span><span class="o">*</span><span class="n">jpg</span> <span class="n">tmp</span><span class="o">.</span><span class="n">gif</span>
<span class="o">%</span> <span class="n">firefox</span> <span class="n">tmp</span><span class="o">.</span><span class="n">gif</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description:<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Dump a high-quality ray-traced image of the simulation every N timesteps
and save the images either as a sequence of JPEG or PNG or PPM files, or
as a single movie file. The options for this command as well as the
<a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify</span></a> command control what is included in
the image and how it appears.</p>
<p>Any or all of these entities can be included in the images:</p>
<ul class="simple">
<li><p>particles (all in mixture or limited to a <a class="reference internal" href="region.html#command-region"><span class="std std-ref">region</span></a>)</p></li>
<li><p>grid cells (all or limited to a <a class="reference internal" href="region.html#command-region"><span class="std std-ref">region</span></a>)</p></li>
<li><p>x,y,z planes cutting through the grid</p></li>
<li><p>surface elements</p></li>
</ul>
<p>Particles can be colored by any attribute allowed by the <a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump particle</span></a> command. Grid cells and the x,y,z cutting planes
can be colored by any per-grid attribute calculated by a
<a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">compute</span></a> or <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a>. Surface elements can
be colored by any per-surf attribute calculated by a
<a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">compute</span></a> or <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a>.</p>
<p>A series of images can easily be converted into an animated movie of
your simulation (see further details below), or the process can be
automated without writing the intermediate files using the dump movie
command. Other dump styles store snapshots of numerical data asociated
with particles, grid cells, and surfaces in various formats, as
discussed on the <a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump</span></a> doc page.</p>
<p>Here are two sample images, rendered as JPG files. Click to see the
full-size images.</p>
<div class="docutils container">
<p><a class="reference external" href="JPG/sphere_image.jpg"><img alt="image0" src="_images/sphere_image_small.jpg" /></a> <a class="reference external" href="JPG/mix_sine.jpg"><img alt="image1" src="_images/mix_sine_small.jpg" /></a></p>
</div>
<p>The left image is flow around a sphere with visualization of triangular
surface elements on the sphere surface (colored by surface presssure), a
vertical plane of grid cells (colored by particle density), and a
horizontal plane of particles (colored by chemical species). The right
image is the initial condition for a 2d simulation of Rayleigh-Taylor
mixing as a relatively dense heavy gas (red) mixes with a light gas
(green), driven by gravity in the downward direction.</p>
<hr class="docutils" />
<p>The filename suffix determines whether a JPEG, PNG, or PPM file is
created with the <em>image</em> dump style. If the suffix is “.jpg” or “.jpeg”,
then a JPEG format file is created, if the suffix is “.png”, then a PNG
format is created, else a PPM (aka NETPBM) format file is created. The
JPEG and PNG files are binary; PPM has a text mode header followed by
binary data. JPEG images have lossy compression; PNG has lossless
compression; and PPM files are uncompressed but can be compressed with
gzip, if SPARTA has been compiled with -DSPARTA_GZIP and a “.gz” suffix
is used.</p>
<p>Similarly, the format of the resulting movie is chosen with the <em>movie</em>
dump style. This is handled by the underlying FFmpeg converter program,
which must be available on your machine, and thus details have to be
looked up in the FFmpeg documentation. Typical examples are: .avi, .mpg,
.m4v, .mp4, .mkv, .flv, .mov, .gif Additional settings of the movie
compression like bitrate and framerate can be set using the
<a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify</span></a> command.</p>
<p>To write out JPEG and PNG format files, you must build SPARTA with
support for the corresponding JPEG or PNG library. To convert images
into movies, SPARTA has to be compiled with the -DSPARTA_FFMPEG flag.
See <a class="reference internal" href="Section_start.html#start-steps-build"><span class="std std-ref">Section 2.2</span></a> of the manual for
instructions on how to do this.</p>
<hr class="docutils" />
<p>Dumps are performed on timesteps that are a multiple of N, including
timestep 0. Note that this means a dump will not be performed on the
initial timestep after the dump command is invoked, if the current
timestep is not a multiple of N. This behavior can be changed via the
<a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify first</span></a> command. N can be changed
between runs by using the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify every</span></a>
command.</p>
<p>Dump <em>image</em> filenames must contain a wildcard character “*”, so that
one image file per snapshot is written. The “*” character is replaced
with the timestep value. For example, tmp.dump.*.jpg becomes
tmp.dump.0.jpg, tmp.dump.10000.jpg, tmp.dump.20000.jpg, etc. Note that
the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify pad</span></a> command can be used to insure
all timestep numbers are the same length (e.g. 00010), which can make it
easier to convert a series of images into a movie in the correct
ordering.</p>
<p>Dump <em>movie</em> filenames on the other hand, must not have any wildcard
character since only one file combining all images into a single movie
will be written by the movie encoder.</p>
<hr class="docutils" />
<p>Several of the keywords determine what objects are rendered in the
image, namely particles, grid cells, or surface elements. There are
additional optional kewords which control how the image is rendered. As
listed below, all of the keywords have defaults, most of which you will
likely not need to change. The <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump modify</span></a> also
has options specific to the dump image style, particularly for assigning
colors to particles and other image features.</p>
<hr class="docutils" />
</div>
<div class="section" id="rendering-of-particles">
<span id="command-dump-image-rendering-particles"></span><h2>Rendering of particles<a class="headerlink" href="#rendering-of-particles" title="Permalink to this headline">¶</a></h2>
<p>Particles are drawn by default using the <em>color</em> and <em>diameter</em>
settings. The <em>particle</em> keyword allow you to turn off the drawing of
all particles, if the specified value is <em>no</em>. Only particles in a
geometric region can be drawn using the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify region</span></a> command.</p>
<p>The <em>color</em> and <em>diameter</em> settings determine the color and size of
particles rendered in the image. They can be any particle attribute
defined for the <a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump particle</span></a> command, including <em>type</em>.</p>
<p>The <em>diameter</em> setting can be overridden with a numeric value by the
optional <em>pdiam</em> keyword, in which case you can specify the <em>diameter</em>
setting with any valid particle attribute. The <em>pdiam</em> keyword overrides
the <em>diameter</em> setting with a specified numeric value. All particles
will be drawn with that diameter, e.g. 1.5, which is in whatever
distance <a class="reference internal" href="units.html#command-units"><span class="std std-ref">units</span></a> the input script defines.</p>
<p>If <em>type</em> is specified for the <em>color</em> setting, then the color of each
particle is determined by its type = species index. By default the
mapping of types to colors is as follows:</p>
<ul class="simple">
<li><p>type 1 = red</p></li>
<li><p>type 2 = green</p></li>
<li><p>type 3 = blue</p></li>
<li><p>type 4 = yellow</p></li>
<li><p>type 5 = aqua</p></li>
<li><p>type 6 = purple</p></li>
</ul>
<p>and repeats itself for types &gt; 6. This mapping can be changed by the
<a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify pcolor</span></a> command.</p>
<p>If <em>proc</em> is specified for the <em>color</em> setting, then the color of each
particle is determined by the ID of the owning processor. The default
mapping of proc IDs to colors is that same as in the list above, except
that proc P corresponds to type P+1.</p>
<p>If <em>type</em> is specified for the <em>diameter</em> setting then the diameter of
each particle is determined by its type = species index. By default all
types have diameter 1.0. This mapping can be changed by the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify adiam</span></a> command.</p>
<p>If <em>proc</em> is specified for the <em>diameter</em> setting then the diameter of
each particle will be the proc ID (0 up to Nprocs-1) in whatever
<a class="reference internal" href="units.html#command-units"><span class="std std-ref">units</span></a> you are using, which is undoubtably not what you
want.</p>
<p>Any of the particle attributes listed in the <a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump custom</span></a>
command can also be used for the <em>color</em> or <em>diameter</em> settings. They
are interpreted in the following way.</p>
<p>If “vx”, for example, is used as the <em>color</em> setting, then the color of
the particle will depend on the x-component of its velocity. The
association of a per-particle value with a specific color is determined
by a “color map”, which can be specified via the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify cmap</span></a> command. The basic idea is that the
particle-attribute will be within a range of values, and every value
within the range is mapped to a specific color. Depending on how the
color map is defined, that mapping can take place via interpolation so
that a value of -3.2 is halfway between “red” and “blue”, or discretely
so that the value of -3.2 is “orange”.</p>
<p>If “vx”, for example, is used as the <em>diameter</em> setting, then the
particle will be rendered using the x-component of its velocity as the
diameter. If the per-particle value &lt;= 0.0, them the particle will not
be drawn.</p>
<hr class="docutils" />
</div>
<div class="section" id="rendering-of-grid-cells">
<span id="command-dump-image-rendering-grid"></span><h2>Rendering of grid cells<a class="headerlink" href="#rendering-of-grid-cells" title="Permalink to this headline">¶</a></h2>
<p>The <em>grid</em> keyword turns on the drawing of grid cells with the specified
color attribute. For 2d, the grid cell is shaded with an rectangle that
is infinitely thin in the z dimension, which allows you to still see the
particles in the grid cell. For 3d, the grid cell is drawn as a solid
brick, which will obscure the particles inside it.</p>
<p>Only grid cells in a geometric region can be drawn using the
<a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify region</span></a> command.</p>
<p>The <em>gridx</em> and <em>gridy</em> and <em>gridz</em> keywords turn on the drawing of of a
2d plane of grid cells at the specified coordinate. This is a way to
draw one or more slices through a 3d image.</p>
<p>The <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify region</span></a> command does not apply to
the <em>gridx</em> and <em>gridy</em> and <em>gridz</em> plane drawing.</p>
<p>If <em>proc</em> is specified for the <em>color</em> setting, then the color of each
grid cell is determined by its owning processor ID. This is useful for
visualizing the result of a load balancing of the grid cells, e.g. by
the <a class="reference internal" href="balance_grid.html#command-balance-grid"><span class="std std-ref">balance_grid</span></a> or <a class="reference internal" href="fix_balance.html#command-fix-balance"><span class="std std-ref">fix balance</span></a> commands. By default the mapping of proc
IDs to colors is as follows:</p>
<ul class="simple">
<li><p>proc ID 1 = red</p></li>
<li><p>proc ID 2 = green</p></li>
<li><p>proc ID 3 = blue</p></li>
<li><p>proc ID 4 = yellow</p></li>
<li><p>proc ID 5 = aqua</p></li>
<li><p>proc ID 6 = purple</p></li>
</ul>
<p>and repeats itself for IDs &gt; 6. Note that for this command, processor
IDs range from 1 to Nprocs inclusive, instead of the more customary 0 to
Nprocs-1. This mapping can be changed by the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify gcolor</span></a> command.</p>
<p>The <em>color</em> setting can also be a per-grid compute or fix. In this case,
it is specified as <em>c_ID</em> or <em>c_ID[N]</em> for a compute and as <em>f_ID</em> and
<em>f_ID[N]</em> for a fix.</p>
<p>This allows per grid cell values in a vector or array to be used to
color the grid cells. The ID in the attribute should be replaced by the
actual ID of the compute or fix that has been defined previously in the
input script. See the <a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">compute</span></a> or <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a>
command for details.</p>
<p>If <em>c_ID</em> is used as a attribute, then the per-grid vector calculated by
the compute is used. If <em>c_ID[N]</em> is used, then N must be in the range
from 1-M, which will use the Nth column of the per-grid array calculated
by the compute.</p>
<p>If <em>f_ID</em> is used as a attribute, then the per-grid vector calculated by
the fix is used. If <em>f_ID[N]</em> is used, then N must be in the range from
1-M, which will use the Nth column of the per-grid array calculated by
the fix.</p>
<p>The manner in which values in the vector or array are mapped to color is
determined by the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify cmap</span></a> command.</p>
<hr class="docutils" />
</div>
<div class="section" id="rendering-of-surface-elements">
<span id="command-dump-image-rendering-surface"></span><h2>Rendering of surface elements<a class="headerlink" href="#rendering-of-surface-elements" title="Permalink to this headline">¶</a></h2>
<p>The <em>surf</em> keyword turns on the drawing of surface elements with the
specified color attribute. For 2d, the surface element is a line whose
diameter is specified by the <em>diam</em> setting as a fraction of the minimum
simulation box length. For 3d it is a triangle and the <em>diam</em> setting is
ignored. The entire surface is rendered, which in 3d will hide any grid
cells (or fractions of a grid cell) that are inside the surface.</p>
<p>The <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify region</span></a> command does not apply to
surface element drawing.</p>
<p>If <em>one</em> is specified for the <em>color</em> setting, then the color of every
surface element is drawn with the color specified by the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify scolor</span></a> keyword, which is gray by default.</p>
<p>If <em>proc</em> is specified for the <em>color</em> setting, then the color of each
surface element is determined by its owning processor ID. Surface
elements are assigned to owning processors in a round-robin fashion. By
default the mapping of proc IDs to colors is as follows:</p>
<ul class="simple">
<li><p>proc ID 1 = red</p></li>
<li><p>proc ID 2 = green</p></li>
<li><p>proc ID 3 = blue</p></li>
<li><p>proc ID 4 = yellow</p></li>
<li><p>proc ID 5 = aqua</p></li>
<li><p>proc ID 6 = purple</p></li>
</ul>
<p>and repeats itself for IDs &gt; 6. Note that for this command, processor
IDs range from 1 to Nprocs inclusive, instead of the more customary 0 to
Nprocs-1. This mapping can be changed by the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify scolor</span></a> command, which has not yet been added to
SPARTA.</p>
<p>The <em>color</em> setting can also be a per-surf compute or fix. In this case,
it is specified as <em>c_ID</em> or <em>c_ID[N]</em> for a compute and as <em>f_ID</em> and
<em>f_ID[N]</em> for a fix.</p>
<p>This allows per-surf values in a vector or array to be used to color the
surface elemtns. The ID in the attribute should be replaced by the
actual ID of the compute or fix that has been defined previously in the
input script. See the <a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">compute</span></a> or <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a>
command for details.</p>
<p>If <em>c_ID</em> is used as a attribute, then the per-surf vector calculated by
the compute is used. If <em>c_ID[N]</em> is used, then N must be in the range
from 1-M, which will use the Nth column of the per-surf array calculated
by the compute.</p>
<p>If <em>f_ID</em> is used as a attribute, then the per-surf vector calculated by
the fix is used. If <em>f_ID[N]</em> is used, then N must be in the range from
1-M, which will use the Nth column of the per-surf array calculated by
the fix.</p>
<p>The manner in which values in the vector or array are mapped to color is
determined by the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify cmap</span></a> command.</p>
<hr class="docutils" />
<p>The <em>size</em> keyword sets the width and height of the created images, i.e.
the number of pixels in each direction.</p>
<hr class="docutils" />
<p>The <em>view</em>, <em>center</em>, <em>up</em>, <em>zoom</em>, and <em>persp</em> values determine how 3d
simulation space is mapped to the 2d plane of the image. Basically they
control how the simulation box appears in the image.</p>
<p>All of the <em>view</em>, <em>center</em>, <em>up</em>, <em>zoom</em>, and <em>persp</em> values can be
specified as numeric quantities, whose meaning is explained below. Any
of them can also be specified as an <a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">equal-style variable</span></a>, by using v_name as the value, where “name”
is the variable name. In this case the variable will be evaluated on the
timestep each image is created to create a new value. If the equal-style
variable is time-dependent, this is a means of changing the way the
simulation box appears from image to image, effectively doing a pan or
fly-by view of your simulation.</p>
<p>The <em>view</em> keyword determines the viewpoint from which the simulation
box is viewed, looking towards the <em>center</em> point. The <em>theta</em> value is
the vertical angle from the +z axis, and must be an angle from 0 to 180
degrees. The <em>phi</em> value is an azimuthal angle around the z axis and can
be positive or negative. A value of 0.0 is a view along the +x axis,
towards the <em>center</em> point. If <em>theta</em> or <em>phi</em> are specified via
variables, then the variable values should be in degrees.</p>
<p>The <em>center</em> keyword determines the point in simulation space that will
be at the center of the image. <em>Cx</em>, <em>Cy</em>, and <em>Cz</em> are speficied as
fractions of the box dimensions, so that (0.5,0.5,0.5) is the center of
the simulation box. These values do not have to be between 0.0 and 1.0,
if you want the simulation box to be offset from the center of the
image. Note, however, that if you choose strange values for <em>Cx</em>, <em>Cy</em>,
or <em>Cz</em> you may get a blank image. Internally, <em>Cx</em>, <em>Cy</em>, and <em>Cz</em> are
converted into a point in simulation space. If <em>flag</em> is set to “s” for
static, then this conversion is done once, at the time the dump command
is issued. If <em>flag</em> is set to “d” for dynamic then the conversion is
performed every time a new image is created. If the box size or shape is
changing, this will adjust the center point in simulation space.</p>
<p>The <em>up</em> keyword determines what direction in simulation space will be
“up” in the image. Internally it is stored as a vector that is in the
plane perpendicular to the view vector implied by the <em>theta</em> and <em>pni</em>
values, and which is also in the plane defined by the view vector and
user-specified up vector. Thus this internal vector is computed from the
user-specified <em>up</em> vector as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">up_internal</span> <span class="o">=</span> <span class="n">view</span> <span class="n">cross</span> <span class="p">(</span><span class="n">up</span> <span class="n">cross</span> <span class="n">view</span><span class="p">)</span>
</pre></div>
</div>
<p>This means the only restriction on the specified <em>up</em> vector is that it
cannot be parallel to the <em>view</em> vector, implied by the <em>theta</em> and
<em>phi</em> values.</p>
<p>The <em>zoom</em> keyword scales the size of the simulation box as it appears
in the image. The default <em>zfactor</em> value of 1 should display an image
mostly filled by the particles in the simulation box. A <em>zfactor</em> &gt; 1
will make the simulation box larger; a <em>zfactor</em> &lt; 1 will make it
smaller. <em>Zfactor</em> must be a value &gt; 0.0.</p>
<p>The <em>persp</em> keyword determines how much depth perspective is present in
the image. Depth perspective makes lines that are parallel in simulation
space appear non-parallel in the image. A <em>pfactor</em> value of 0.0 means
that parallel lines will meet at infininty (1.0/pfactor), which is an
orthographic rendering with no persepctive. A <em>pfactor</em> value between
0.0 and 1.0 will introduce more perspective. A <em>pfactor</em> value &gt; 1 will
create a highly skewed image with a large amount of perspective.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <em>persp</em> keyword is not yet supported as an option.</p>
</div>
<hr class="docutils" />
<p>The <em>box</em> keyword determines how the simulation box boundaries are
rendered as thin cylinders in the image. If <em>no</em> is set, then the box
boundaries are not drawn and the <em>diam</em> setting is ignored. If <em>yes</em> is
set, the 12 edges of the box are drawn, with a diameter that is a
fraction of the shortest box length in x,y,z (for 3d) or x,y (for 2d).
The color of the box boundaries can be set with the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify boxcolor</span></a> command.</p>
<p>The <em>gline</em> keyword determines how the outlines of grid cells are
rendered as thin cylinders in the image. If the <em>gridx</em> or <em>gridy</em> or
<em>gridz</em> keywords are specified to draw a plane(s) of grid cells, then
outlines of all cells in the plane(s) are drawn. If the planar options
are not used, then the outlines of all grid cells are drawn, whether the
<em>grid</em> keyword is specified or not. In this case, the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify region</span></a> command can be used to restrict which grid
cells the outlines are drawn for.</p>
<p>For the <em>gline</em> keywork, if <em>no</em> is set, then grid outlines are not
drawn and the <em>diam</em> setting is ignored. If <em>yes</em> is set, the 12 edges
of each grid cell are drawn, with a diameter that is a fraction of the
shortest box length in x,y,z (for 3d) or x,y (for 2d). The color of the
grid cell outlines can be set with the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify glinecolor</span></a> command.</p>
<p>The <em>sline</em> keyword determines how the outlines of surface elements are
rendered as thin cylinders in the image. If <em>no</em> is set, then the
surface element outlines are not drawn and the <em>diam</em> setting is
ignored. If <em>yes</em> is set, a line is drawn for 2d and a triangle outline
for 3d surface elements, with a diameter that is a fraction of the
shortest box length in x,y,z (for 3d) or x,y (for 2d). The color of the
surface element outlines can be set with the <a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify slinecolor</span></a> command.</p>
<p>The <em>axes</em> keyword determines how the coordinate axes are rendered as
thin cylinders in the image. If <em>no</em> is set, then the axes are not drawn
and the <em>length</em> and <em>diam</em> settings are ignored. If <em>yes</em> is set, 3
thin cylinders are drawn to represent the x,y,z axes in colors
red,green,blue. The origin of these cylinders will be offset from the
lower left corner of the box by 10%. The <em>length</em> setting determines how
long the cylinders will be as a fraction of the respective box lengths.
The <em>diam</em> setting determines their thickness as a fraction of the
shortest box length in x,y,z (for 3d) or x,y (for 2d).</p>
<hr class="docutils" />
<p>The <em>shiny</em> keyword determines how shiny the objects rendered in the
image will appear. The <em>sfactor</em> value must be a value 0.0 &lt;= <em>sfactor</em>
&lt;= 1.0, where <em>sfactor</em> = 1 is a highly reflective surface and <em>sfactor</em>
= 0 is a rough non-shiny surface.</p>
<p>The <em>ssao</em> keyword turns on/off a screen space ambient occlusion (SSAO)
model for depth shading. If <em>yes</em> is set, then particles further away
from the viewer are darkened via a randomized process, which is
perceived as depth. The calculation of this effect can increase the cost
of computing the image by roughly 2x. The strength of the effect can be
scaled by the <em>dfactor</em> parameter. If <em>no</em> is set, no depth shading is
performed.</p>
<hr class="docutils" />
<p>A series of JPEG, PNG, or PPM images can be converted into a movie file
and then played as a movie using commonly available tools. Using dump
style <em>movie</em> automates this step and avoids the intermediate step of
writing (many) image snapshot file.</p>
<p>To manually convert JPEG, PNG or PPM files into an animated GIF or MPEG
or other movie file you can:</p>
<ul>
<li><ol class="loweralpha simple">
<li><p>Use the ImageMagick convert program.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">convert</span> <span class="o">*.</span><span class="n">jpg</span> <span class="n">foo</span><span class="o">.</span><span class="n">gif</span>
<span class="o">%</span> <span class="n">convert</span> <span class="o">-</span><span class="n">loop</span> <span class="mi">1</span> <span class="o">*.</span><span class="n">ppm</span> <span class="n">foo</span><span class="o">.</span><span class="n">mpg</span>
</pre></div>
</div>
<p>Animated GIF files from ImageMagick are unoptimized. You can use a
program like gifsicle to optimize and massively shrink them. MPEG
files created by ImageMagick are in MPEG-1 format with rather
inefficient compression and low quality.</p>
</li>
<li><ol class="loweralpha simple" start="2">
<li><p>Use QuickTime.</p></li>
</ol>
<p>Select “Open Image Sequence” under the File menu Load the images into
QuickTime to animate them Select “Export” under the File menu Save
the movie as a QuickTime movie (*.mov) or in another format.
QuickTime can generate very high quality and efficiently compressed
movie files. Some of the supported formats require to buy a license
and some are not readable on all platforms until specific runtime
libraries are installed.</p>
</li>
<li><ol class="loweralpha simple" start="3">
<li><p>Use FFmpeg</p></li>
</ol>
<p>FFmpeg is a command line tool that is available on many platforms and
allows extremely flexible encoding and decoding of movies.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="n">snap</span><span class="o">.*.</span><span class="n">jpg</span> <span class="o">|</span> <span class="n">ffmpeg</span> <span class="o">-</span><span class="n">y</span> <span class="o">-</span><span class="n">f</span> <span class="n">image2pipe</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">mjpeg</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span> <span class="o">-</span><span class="n">b</span><span class="p">:</span><span class="n">v</span> <span class="mi">2000</span><span class="n">k</span> <span class="n">movie</span><span class="o">.</span><span class="n">m4v</span>
<span class="n">cat</span> <span class="n">snap</span><span class="o">.*.</span><span class="n">ppm</span> <span class="o">|</span> <span class="n">ffmpeg</span> <span class="o">-</span><span class="n">y</span> <span class="o">-</span><span class="n">f</span> <span class="n">image2pipe</span> <span class="o">-</span><span class="n">c</span><span class="p">:</span><span class="n">v</span> <span class="n">ppm</span> <span class="o">-</span><span class="n">i</span> <span class="o">-</span> <span class="o">-</span><span class="n">b</span><span class="p">:</span><span class="n">v</span> <span class="mi">2400</span><span class="n">k</span> <span class="n">movie</span><span class="o">.</span><span class="n">avi</span>
</pre></div>
</div>
<p>Frontends for FFmpeg exist for multiple platforms. For more
information see the <a class="reference external" href="http://www.ffmpeg.org/">FFmpeg homepage</a></p>
</li>
</ul>
<hr class="docutils" />
<p>You can play a movie file as follows:</p>
<ul>
<li><ol class="loweralpha simple">
<li><p>Use your browser to view an animated GIF movie.</p></li>
</ol>
<p>Select “Open File” under the File menu Load the animated GIF file</p>
</li>
<li><p>b) Use the freely available mplayer or ffplay tool to view a movie.
Both are available for multiple OSes and support a large variety of
file formats and decoders.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">mplayer</span> <span class="n">foo</span><span class="o">.</span><span class="n">mpg</span>
<span class="o">%</span> <span class="n">ffplay</span> <span class="n">bar</span><span class="o">.</span><span class="n">avi</span>
</pre></div>
</div>
</li>
<li><ol class="loweralpha simple" start="3">
<li><p>Use the <a class="reference external" href="http://www.sandia.gov/~sjplimp/pizza.html">Pizza.py</a> <a class="reference external" href="http://www.sandia.gov/~sjplimp/pizza/doc/animate.html">animate tool</a>, which works directly on a series of image files.</p></li>
</ol>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">animate</span><span class="p">(</span><span class="s2">&quot;foo*.jpg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>d) QuickTime and other Windows- or MacOS-based media players can
obviously play movie files directly. Similarly for corresponding
tools bundled with Linux desktop environments. However, due to
licensing issues with some file formats, the formats may require
installing additional libraries, purchasing a license, or may not be
supported.</p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="restrictions">
<h2>Restrictions:<a class="headerlink" href="#restrictions" title="Permalink to this headline">¶</a></h2>
<p>To write JPEG images, you must use the -DSPARTA_JPEG switch when
building SPARTA and link with a JPEG library. To write PNG images, you
must use the -DSPARTA_PNG switch when building SPARTA and link with a
PNG library.</p>
<p>To write <em>movie</em> files, you must use the -SPARTA_FFMPEG switch when
building SPARTA. The FFmpeg executable must also be available on the
machine where SPARTA is being run. Typically it’s name is lowercase,
i.e. ffmpeg.</p>
<p>See <a class="reference internal" href="Section_start.html#start-steps-build"><span class="std std-ref">Steps to build a SPARTA executable:</span></a> section of the documentation for details on how to compile with optional switches.</p>
<p>Note that since FFmpeg is run as an external program via a pipe, SPARTA
has limited control over its execution and no knowledge about errors and
warnings printed by it. Those warnings and error messages will be
printed to the screen only. Due to the way image data is communicated to
FFmpeg, it will often print the message + pipe:: Input/output error :pre
+ which can be safely ignored. Other warnings and errors have to be
addressed according to the FFmpeg documentation. One known issue is that
certain movie file formats (e.g. MPEG level 1 and 2 format streams) have
video bandwith limits that can be crossed when rendering too large of
image sizes. Typical warnings look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">mpeg</span> <span class="o">@</span> <span class="mh">0x98b5e0</span><span class="p">]</span> <span class="n">packet</span> <span class="n">too</span> <span class="n">large</span><span class="p">,</span> <span class="n">ignoring</span> <span class="n">buffer</span> <span class="n">limits</span> <span class="n">to</span> <span class="n">mux</span> <span class="n">it</span>
<span class="p">[</span><span class="n">mpeg</span> <span class="o">@</span> <span class="mh">0x98b5e0</span><span class="p">]</span> <span class="n">buffer</span> <span class="n">underflow</span> <span class="n">st</span><span class="o">=</span><span class="mi">0</span> <span class="n">bufi</span><span class="o">=</span><span class="mi">281407</span> <span class="n">size</span><span class="o">=</span><span class="mi">285018</span>
<span class="p">[</span><span class="n">mpeg</span> <span class="o">@</span> <span class="mh">0x98b5e0</span><span class="p">]</span> <span class="n">buffer</span> <span class="n">underflow</span> <span class="n">st</span><span class="o">=</span><span class="mi">0</span> <span class="n">bufi</span><span class="o">=</span><span class="mi">283448</span> <span class="n">size</span><span class="o">=</span><span class="mi">285018</span>
</pre></div>
</div>
<p>In this case it is recommended to either reduce the size of the image or
encode in a different format that is also supported by your copy of
FFmpeg, and which does not have this limitation (e.g. .avi, .mkv, mp4).</p>
</div>
<div class="section" id="related-commands">
<h2>Related commands:<a class="headerlink" href="#related-commands" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="dump.html#command-dump"><span class="std std-ref">dump</span></a>,
<a class="reference internal" href="dump_modify.html#command-dump-modify"><span class="std std-ref">dump_modify</span></a>,
<a class="reference internal" href="undump.html#command-undump"><span class="std std-ref">undump</span></a></p>
</div>
<div class="section" id="default">
<h2>Default:<a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h2>
<p>The defaults for the keywords are as follows:</p>
<ul class="simple">
<li><p>particle = yes</p></li>
<li><p>pdiam = not specified (use diameter setting)</p></li>
<li><p>grid = not specified (no drawing of grid cells)</p></li>
<li><p>gridx = not specified (no drawing of x-plane of grid cells)</p></li>
<li><p>gridy = not specified (no drawing of y-plane of grid cells)</p></li>
<li><p>gridz = not specified (no drawing of z-plane of grid cells)</p></li>
<li><p>surf = not specified (no drawing of surface elements)</p></li>
<li><p>size = 512 512</p></li>
<li><p>view = 60 30 (for 3d)</p></li>
<li><p>view = 0 0 (for 2d)</p></li>
<li><p>center = s 0.5 0.5 0.5</p></li>
<li><p>up = 0 0 1 (for 3d)</p></li>
<li><p>up = 0 1 0 (for 2d)</p></li>
<li><p>zoom = 1.0</p></li>
<li><p>persp = 0.0</p></li>
<li><p>box = yes 0.02</p></li>
<li><p>gline = no 0.0</p></li>
<li><p>sline = no 0.0</p></li>
<li><p>axes = no 0.0 0.0</p></li>
<li><p>shiny = 1.0</p></li>
<li><p>ssao = no</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>