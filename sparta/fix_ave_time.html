

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>fix ave/time command &mdash; SPARTA 7 May 2020 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/rtd_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SPARTA
          

          
          </a>

          
            
            
              <div class="version">
                7 May 2020
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
  
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Section_intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_start.html">2. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_commands.html">3. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_packages.html">4. Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_accelerate.html">5. Accelerating SPARTA performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_howto.html">6. How-to discussions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_example.html">7. Example problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_perf.html">8. Performance &amp; scalability</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_tools.html">9. Additional tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_modify.html">10. Modifying &amp; extending SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_python.html">11. Python interface to SPARTA</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_errors.html">12. Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="Section_history.html">13. Future and history</a></li>
</ul>

            
          
  <a href= "genindex.html">Index</a>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SPARTA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>fix ave/time command</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/fix_ave_time.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="fix-ave-time-command">
<span id="command-fix-ave-time"></span><span id="index-0"></span><h1>fix ave/time command<a class="headerlink" href="#fix-ave-time-command" title="Permalink to this headline">¶</a></h1>
<p><strong>Syntax:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fix</span> <span class="n">ID</span> <span class="n">ave</span><span class="o">/</span><span class="n">time</span> <span class="n">Nevery</span> <span class="n">Nrepeat</span> <span class="n">Nfreq</span> <span class="n">value1</span> <span class="n">value2</span> <span class="o">...</span> <span class="n">keyword</span> <span class="n">args</span> <span class="o">...</span>
</pre></div>
</div>
<ul>
<li><p>ID is documented in <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a> command</p></li>
<li><p>ave/time = style name of this fix command</p></li>
<li><p>Nevery = use input values every this many timesteps</p></li>
<li><p>Nrepeat = # of times to use input values for calculating averages</p></li>
<li><p>Nfreq = calculate averages every this many timesteps</p></li>
<li><p>one or more input values can be listed</p></li>
<li><p>value = c_ID, c_ID[N], f_ID, f_ID[N], v_name</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c_ID</span> <span class="o">=</span> <span class="k">global</span> <span class="n">scalar</span> <span class="ow">or</span> <span class="n">vector</span> <span class="ow">or</span> <span class="n">array</span> <span class="n">calculated</span> <span class="n">by</span> <span class="n">a</span> <span class="n">compute</span> <span class="k">with</span> <span class="n">ID</span>
<span class="n">c_ID</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ith</span> <span class="n">component</span> <span class="n">of</span> <span class="k">global</span> <span class="n">vector</span> <span class="ow">or</span> <span class="n">Ith</span> <span class="n">column</span> <span class="n">of</span> <span class="k">global</span> <span class="n">array</span> <span class="n">calculated</span> <span class="n">by</span> <span class="n">a</span> <span class="n">compute</span> <span class="k">with</span> <span class="n">ID</span><span class="p">,</span> <span class="n">I</span> <span class="n">can</span> <span class="n">include</span> <span class="n">wildcard</span> <span class="p">(</span><span class="n">see</span> <span class="n">below</span><span class="p">)</span>
<span class="n">f_ID</span> <span class="o">=</span> <span class="k">global</span> <span class="n">scalar</span> <span class="ow">or</span> <span class="n">vector</span> <span class="ow">or</span> <span class="n">array</span> <span class="n">calculated</span> <span class="n">by</span> <span class="n">a</span> <span class="n">fix</span> <span class="k">with</span> <span class="n">ID</span>
<span class="n">f_ID</span><span class="p">[</span><span class="n">I</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ith</span> <span class="n">component</span> <span class="n">of</span> <span class="k">global</span> <span class="n">vector</span> <span class="ow">or</span> <span class="n">Ith</span> <span class="n">column</span> <span class="n">of</span> <span class="k">global</span> <span class="n">array</span> <span class="n">calculated</span> <span class="n">by</span> <span class="n">a</span> <span class="n">fix</span> <span class="k">with</span> <span class="n">ID</span><span class="p">,</span> <span class="n">I</span> <span class="n">can</span> <span class="n">include</span> <span class="n">wildcard</span> <span class="p">(</span><span class="n">see</span> <span class="n">below</span><span class="p">)</span>
<span class="n">v_name</span> <span class="o">=</span> <span class="k">global</span> <span class="n">value</span> <span class="n">calculated</span> <span class="n">by</span> <span class="n">an</span> <span class="n">equal</span><span class="o">-</span><span class="n">style</span> <span class="n">variable</span> <span class="k">with</span> <span class="n">name</span>
</pre></div>
</div>
</li>
<li><p>zero or more keyword/arg pairs may be appended</p></li>
<li><p>keyword = <em>mode</em> or <em>file</em> or <em>ave</em> or <em>start</em> or <em>off</em> or <em>title1</em>
or <em>title2</em> or <em>title3</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mode</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">scalar</span> <span class="ow">or</span> <span class="n">vector</span>
  <span class="n">scalar</span> <span class="o">=</span> <span class="nb">all</span> <span class="nb">input</span> <span class="n">values</span> <span class="n">are</span> <span class="k">global</span> <span class="n">scalars</span>
  <span class="n">vector</span> <span class="o">=</span> <span class="nb">all</span> <span class="nb">input</span> <span class="n">values</span> <span class="n">are</span> <span class="k">global</span> <span class="n">vectors</span> <span class="ow">or</span> <span class="k">global</span> <span class="n">arrays</span>
<span class="n">ave</span> <span class="n">args</span> <span class="o">=</span> <span class="n">one</span> <span class="ow">or</span> <span class="n">running</span> <span class="ow">or</span> <span class="n">window</span> <span class="n">M</span>
  <span class="n">one</span> <span class="o">=</span> <span class="n">output</span> <span class="n">a</span> <span class="n">new</span> <span class="n">average</span> <span class="n">value</span> <span class="n">every</span> <span class="n">Nfreq</span> <span class="n">steps</span>
  <span class="n">running</span> <span class="o">=</span> <span class="n">output</span> <span class="n">cummulative</span> <span class="n">average</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">previous</span> <span class="n">Nfreq</span> <span class="n">steps</span>
  <span class="n">window</span> <span class="n">M</span> <span class="o">=</span> <span class="n">output</span> <span class="n">average</span> <span class="n">of</span> <span class="n">M</span> <span class="n">most</span> <span class="n">recent</span> <span class="n">Nfreq</span> <span class="n">steps</span>
<span class="n">start</span> <span class="n">args</span> <span class="o">=</span> <span class="n">Nstart</span>
  <span class="n">Nstart</span> <span class="o">=</span> <span class="n">start</span> <span class="n">averaging</span> <span class="n">on</span> <span class="n">this</span> <span class="n">timestep</span>
<span class="n">off</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">M</span> <span class="o">=</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">average</span> <span class="n">this</span> <span class="n">value</span>
  <span class="n">M</span> <span class="o">=</span> <span class="n">value</span> <span class="c1"># from 1 to Nvalues</span>
<span class="n">file</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">filename</span>
  <span class="n">filename</span> <span class="o">=</span> <span class="n">name</span> <span class="n">of</span> <span class="n">file</span> <span class="n">to</span> <span class="n">output</span> <span class="n">time</span> <span class="n">averages</span> <span class="n">to</span>
<span class="n">title1</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">string</span>
  <span class="n">string</span> <span class="o">=</span> <span class="n">text</span> <span class="n">to</span> <span class="nb">print</span> <span class="k">as</span> <span class="mi">1</span><span class="n">st</span> <span class="n">line</span> <span class="n">of</span> <span class="n">output</span> <span class="n">file</span>
<span class="n">title2</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">string</span>
  <span class="n">string</span> <span class="o">=</span> <span class="n">text</span> <span class="n">to</span> <span class="nb">print</span> <span class="k">as</span> <span class="mi">2</span><span class="n">nd</span> <span class="n">line</span> <span class="n">of</span> <span class="n">output</span> <span class="n">file</span>
<span class="n">title3</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">string</span>
  <span class="n">string</span> <span class="o">=</span> <span class="n">text</span> <span class="n">to</span> <span class="nb">print</span> <span class="k">as</span> <span class="mi">3</span><span class="n">rd</span> <span class="n">line</span> <span class="n">of</span> <span class="n">output</span> <span class="n">file</span><span class="p">,</span> <span class="n">only</span> <span class="k">for</span> <span class="n">vector</span> <span class="n">mode</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fix</span> <span class="mi">1</span> <span class="n">ave</span><span class="o">/</span><span class="n">time</span> <span class="nb">all</span> <span class="mi">100</span> <span class="mi">5</span> <span class="mi">1000</span> <span class="n">c_myTemp</span> <span class="n">c_thermo_temp</span> <span class="n">file</span> <span class="n">temp</span><span class="o">.</span><span class="n">profile</span>
<span class="n">fix</span> <span class="mi">1</span> <span class="n">ave</span><span class="o">/</span><span class="n">time</span> <span class="nb">all</span> <span class="mi">100</span> <span class="mi">5</span> <span class="mi">1000</span> <span class="n">c_myCount</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="n">c_myCount</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">ave</span> <span class="n">window</span> <span class="mi">20</span> <span class="o">&amp;</span>
                              <span class="n">title1</span> <span class="s2">&quot;My output values&quot;</span>
<span class="n">fix</span> <span class="mi">1</span> <span class="n">ave</span><span class="o">/</span><span class="n">time</span> <span class="nb">all</span> <span class="mi">100</span> <span class="mi">5</span> <span class="mi">1000</span> <span class="n">c_myCount</span><span class="p">[</span><span class="o">*</span><span class="p">]</span> <span class="n">ave</span> <span class="n">window</span> <span class="mi">20</span>
<span class="n">fix</span> <span class="mi">1</span> <span class="n">ave</span><span class="o">/</span><span class="n">time</span> <span class="nb">all</span> <span class="mi">1</span> <span class="mi">100</span> <span class="mi">1000</span> <span class="n">f_indent</span> <span class="n">f_indent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">file</span> <span class="n">temp</span><span class="o">.</span><span class="n">indent</span> <span class="n">off</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Description:</strong></p>
<p>Use one or more global values as inputs every few timesteps, and average
them over longer timescales. The resulting averages can be used by other
output commands such as <a class="reference internal" href="stats_style.html#command-stats-style"><span class="std std-ref">stats_style custom</span></a>, and
can also be written to a file. Note that if no time averaging is done,
this command can be used as a convenient way to simply output one or
more global values to a file.</p>
<p>Each listed value can be the result of a <a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">compute</span></a> or
<a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fix</span></a> or the evaluation of an equal-style
<a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">variable</span></a>. In each case, the compute, fix, or
variable must produce a global quantity, not a per-grid or per-surf
quantity. If you wish to time-average those quantities, see the <a class="reference internal" href="fix_ave_grid.html#command-fix-ave-grid"><span class="std std-ref">fix ave/grid</span></a> and <a class="reference internal" href="fix_ave_surf.html#command-fix-ave-surf"><span class="std std-ref">fix ave/surf</span></a>
commands.</p>
<p><a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">Computes</span></a> that produce global quantities are those
which do not have the word <em>particle</em> or <em>grid</em> or <em>surf</em> in their style
name. Only a few <a class="reference internal" href="fix.html#command-fix"><span class="std std-ref">fixes</span></a> produce global quantities. See the
doc pages for individual fixes for info on which ones produce such
values. <a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">Variables</span></a> of style <em>equal</em> are the only ones
that can be used with this fix. Variables of style <em>particle</em> cannot be
used, since they produce per-particle values.</p>
<p>The input values must either be all scalars or all vectors (or arrays),
depending on the setting of the <em>mode</em> keyword. In both cases, the
averaging is performed independently on each input value. I.e. each
input scalar is averaged independently and each element of each input
vector (or array) is averaged independently.</p>
<p>If <em>mode</em> = scalar, then the input values must be scalars, or vectors
with a bracketed term appended, indicating the Ith value of the vector
is used.</p>
<p>If <em>mode</em> = vector, then the input values must be vectors, or arrays
with a bracketed term appended, indicating the Ith column of the array
is used. All vectors must be the same length, which is the length of the
vector or number of rows in the array.</p>
<p>Note that for values from a compute or fix, the bracketed index I can be
specified using a wildcard asterisk with the index to effectively
specify multiple values. This takes the form “*” or “<em>n” or “n</em>” or
“m*n”. If N = the size of the vector (for <em>mode</em> = scalar) or the number
of columns in the array (for <em>mode</em> = vector), then an asterisk with no
numeric values means all indices from 1 to N. A leading asterisk means
all indices from 1 to n (inclusive). A trailing asterisk means all
indices from n to N (inclusive). A middle asterisk means all indices
from m to n (inclusive).</p>
<p>Using a wildcard is the same as if the individual elements of the vector
or columns of the array had been listed one by one. E.g. these 2 fix
ave/time commands are equivalent, since the <a class="reference internal" href="compute_count.html#command-compute-count"><span class="std std-ref">compute count</span></a> command creates, in this case, a global
vector with 3 values.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">compute</span> <span class="mi">1</span> <span class="n">count</span> <span class="n">Ar</span> <span class="n">He</span> <span class="n">O</span>
<span class="n">fix</span> <span class="mi">1</span> <span class="n">ave</span><span class="o">/</span><span class="n">time</span> <span class="mi">100</span> <span class="mi">1</span> <span class="mi">100</span> <span class="n">c_1</span> <span class="n">file</span> <span class="n">tmp</span><span class="o">.</span><span class="n">count</span>
<span class="n">fix</span> <span class="mi">1</span> <span class="n">ave</span><span class="o">/</span><span class="n">time</span> <span class="mi">100</span> <span class="mi">1</span> <span class="mi">100</span> <span class="n">c_1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">c_1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="n">c_1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="n">file</span> <span class="n">tmp</span><span class="o">.</span><span class="n">count</span>
</pre></div>
</div>
<hr class="docutils" />
<p>The <em>Nevery</em>, <em>Nrepeat</em>, and <em>Nfreq</em> arguments specify on what timesteps
the input values will be used in order to contribute to the average. The
final averaged quantities are generated on timesteps that are a mlutiple
of <em>Nfreq</em>. The average is over <em>Nrepeat</em> quantities, computed in the
preceding portion of the simulation every <em>Nevery</em> timesteps. <em>Nfreq</em>
must be a multiple of <em>Nevery</em> and <em>Nevery</em> must be non-zero even if
<em>Nrepeat</em> is 1. Also, the timesteps contributing to the average value
cannot overlap, i.e. Nfreq &gt; (Nrepeat-1)*Nevery is required.</p>
<p>For example, if Nevery=2, Nrepeat=6, and Nfreq=100, then values on
timesteps 90,92,94,96,98,100 will be used to compute the final average
on timestep 100. Similarly for timesteps 190,192,194,196,198,200 on
timestep 200, etc. If Nrepeat=1 and Nfreq = 100, then no time averaging
is done; values are simply generated on timesteps 100,200,etc.</p>
<hr class="docutils" />
<p>If a value begins with <code class="docutils literal notranslate"><span class="pre">c_</span></code>, a compute ID must follow which has been
previously defined in the input script. If <em>mode</em> = scalar, then if no
bracketed term is appended, the global scalar calculated by the compute
is used. If a bracketed term is appended, the Ith element of the global
vector calculated by the compute is used. If <em>mode</em> = vector, then if no
bracketed term is appended, the global vector calculated by the compute
is used. If a bracketed term is appended, the Ith column of the global
array calculated by the compute is used. See the discussion above for
how I can be specified with a wildcard asterisk to effectively specify
multiple values.</p>
<p>Note that there is a <a class="reference internal" href="compute_reduce.html#command-compute-reduce"><span class="std std-ref">compute reduce</span></a> command
which can sum per-particle or per-grid or per-surf quantities into a
global scalar or vector which can thus be accessed by fix ave/time. Also
Note that users can also write code for their own compute styles and
<a class="reference internal" href="Section_modify.html#modify"><span class="std std-ref">add them to SPARTA</span></a>; their output can then be
processed by this fix.</p>
<p>If a value begins with <code class="docutils literal notranslate"><span class="pre">f_</span></code>, a fix ID must follow which has been
previously defined in the input script. If <em>mode</em> = scalar, then if no
bracketed term is appended, the global scalar calculated by the fix is
used. If a bracketed term is appended, the Ith element of the global
vector calculated by the fix is used. If <em>mode</em> = vector, then if no
bracketed term is appended, the global vector calculated by the fix is
used. If a bracketed term is appended, the Ith column of the global
array calculated by the fix is used. See the discussion above for how I
can be specified with a wildcard asterisk to effectively specify
multiple values.</p>
<p>Note that some fixes only produce their values on certain timesteps,
which must be compatible with <em>Nevery</em>, else an error will result. Users
can also write code for their own fix styles and <a class="reference internal" href="Section_modify.html#modify"><span class="std std-ref">add them to SPARTA</span></a>.</p>
<p>If a value begins with <code class="docutils literal notranslate"><span class="pre">v_</span></code>, a variable name must follow which has been
previously defined in the input script. Variables can only be used as
input for <em>mode</em> = scalar. Only equal-style variables can be referenced.
See the <a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">variable</span></a> command for details. Note that
variables of style <em>equal</em> define a formula which can reference
<a class="reference internal" href="stats_style.html#command-stats-style"><span class="std std-ref">stats_style</span></a> keywords, or they can invoke other
computes, fixes, or variables when they are evaluated, so this is a very
general means of specifying quantities to time average.</p>
<hr class="docutils" />
<p>Additional optional keywords also affect the operation of this fix.</p>
<p>If the <em>mode</em> keyword is set to <em>scalar</em>, then all input values must be
global scalars, or elements of global vectors. If the <em>mode</em> keyword is
set to <em>vector</em>, then all input values must be global vectors, or
columns of global arrays. They can also be global arrays, which are
converted into a series of global vectors (one per column), as explained
above.</p>
<p>The <em>ave</em> keyword determines how the values produced every <em>Nfreq</em> steps
are averaged with values produced on previous steps that were multiples
of <em>Nfreq</em>, before they are accessed by another output command or
written to a file.</p>
<p>If the <em>ave</em> setting is <em>one</em>, then the values produced on timesteps
that are multiples of <em>Nfreq</em> are independent of each other; they are
output as-is without further averaging.</p>
<p>If the <em>ave</em> setting is <em>running</em>, then the values produced on timesteps
that are multiples of <em>Nfreq</em> are summed and averaged in a cummulative
sense before being output. Each output value is thus the average of the
value produced on that timestep with all preceding values. This running
average begins when the fix is defined; it can only be restarted by
deleting the fix via the <a class="reference internal" href="unfix.html#command-unfix"><span class="std std-ref">unfix</span></a> command, or by
re-defining the fix by re-specifying it.</p>
<p>If the <em>ave</em> setting is <em>window</em>, then the values produced on timesteps
that are multiples of <em>Nfreq</em> are summed and averaged within a moving
“window” of time, so that the last M values are used to produce the
output. E.g. if M = 3 and Nfreq = 1000, then the output on step 10000
will be the average of the individual values on steps 8000,9000,10000.
Outputs on early steps will average over less than M values if they are
not available.</p>
<p>The <em>start</em> keyword specifies what timestep averaging will begin on. The
default is step 0. Often input values can be 0.0 at time 0, so setting
<em>start</em> to a larger value can avoid including a 0.0 in a running or
windowed average.</p>
<p>The <em>off</em> keyword can be used to flag any of the input values. If a
value is flagged, it will not be time averaged. Instead the most recent
input value will always be stored and output. This is useful if one of
more of the inputs produced by a compute or fix or variable are
effectively constant or are simply current values. E.g. they are being
written to a file with other time-averaged values for purposes of
creating well-formatted output.</p>
<p>The <em>file</em> keyword allows a filename to be specified. Every <em>Nfreq</em>
steps, one quantity or vector of quantities is written to the file for
each input value specified in the fix ave/time command. For <em>mode</em> =
scalar, this means a single line is written each time output is
performed. Thus the file ends up to be a series of lines, i.e. one
column of numbers for each input value. For <em>mode</em> = vector, an array of
numbers is written each time output is performed. The number of rows is
the length of the input vectors, and the number of columns is the number
of values. Thus the file ends up to be a series of these array sections.</p>
<p>The <em>title1</em> and <em>title2</em> and <em>title3</em> keywords allow specification of
the strings that will be printed as the first 2 or 3 lines of the output
file, assuming the <em>file</em> keyword was used. SPARTA uses default values
for each of these, so they do not need to be specified.</p>
<p>By default, these header lines are as follows for <em>mode</em> = scalar:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Time-averaged data for fix ID</span>
<span class="c1"># TimeStep value1 value2 ...</span>
</pre></div>
</div>
<p>In the first line, ID is replaced with the fix-ID. In the second line
the values are replaced with the appropriate fields from the fix
ave/time command. There is no third line in the header of the file, so
the <em>title3</em> setting is ignored when <em>mode</em> = scalar.</p>
<p>By default, these header lines are as follows for <em>mode</em> = vector:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Time-averaged data for fix ID</span>
<span class="c1"># TimeStep Number-of-rows</span>
<span class="c1"># Row value1 value2 ...</span>
</pre></div>
</div>
<p>In the first line, ID is replaced with the fix-ID. The second line
describes the two values that are printed at the first of each section
of output. In the third line the values are replaced with the
appropriate fields from the fix ave/time command.</p>
<hr class="docutils" />
<p><strong>Restart, output info:</strong></p>
<p>No information about this fix is written to <a class="reference internal" href="restart.html#command-restart"><span class="std std-ref">binary restart files</span></a>.</p>
<p>This fix produces a global scalar or global vector or global array which
can be accessed by various output commands. The values can only be
accessed on timesteps that are multiples of <em>Nfreq</em> since that is when
averaging is performed.</p>
<p>A scalar is produced if only a single input value is averaged and <em>mode</em>
= scalar. A vector is produced if multiple input values are averaged for
<em>mode</em> = scalar, or a single input value for <em>mode</em> = vector. In the
first case, the length of the vector is the number of inputs. In the
second case, the length of the vector is the same as the length of the
input vector. An array is produced if multiple input values are averaged
and <em>mode</em> = vector. The global array has # of rows = length of the
input vectors and # of columns = number of inputs.</p>
<p><strong>Restrictions:</strong> none</p>
<p><strong>Related commands:</strong></p>
<p><a class="reference internal" href="compute.html#command-compute"><span class="std std-ref">compute command</span></a>,
<a class="reference internal" href="fix_ave_surf.html#command-fix-ave-surf"><span class="std std-ref">fix ave/surf command</span></a>,
<a class="reference internal" href="variable.html#command-variable"><span class="std std-ref">variable command</span></a></p>
<p><strong>Default:</strong> none</p>
<p>The option defaults are mode = scalar, ave = one, start = 0, no file
output, title 1,2,3 = strings as described above, and no off settings
for any input values.</p>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>